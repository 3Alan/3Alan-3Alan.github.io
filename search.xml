<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>记一次Next.js搭建之旅</title>
      <link href="/posts/6af865/"/>
      <url>/posts/6af865/</url>
      
        <content type="html"><![CDATA[<p>这段时间工作要求将之前的vue的H5活动页面转移到Next.js下面，经过一段时间的研究，总结出了下面的内容。</p><a id="more"></a><h1 id="什么是Next-js"><a href="#什么是Next-js" class="headerlink" title="什么是Next.js"></a>什么是Next.js</h1><p>基于<code>React</code>的SSR（服务端渲染框架）</p><h1 id="SSR-amp-CSR"><a href="#SSR-amp-CSR" class="headerlink" title="SSR &amp; CSR"></a>SSR &amp; CSR</h1><blockquote><p>参考链接：<a href="https://medium.com/walmartglobaltech/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8" target="_blank" rel="noopener">https://medium.com/walmartglobaltech/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8</a></p></blockquote><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/06/ssr-explanation.png?w=800&ssl=1"  /><blockquote><p>The main difference is that for SSR your server’s response to the browser is the HTML of your page that is ready to be rendered, while for CSR the browser gets a pretty empty document with links to your javascript. That means your browser will start rendering the HTML from your server without having to wait for all the JavaScript to be downloaded and executed. In both cases, React will need to be downloaded and go through the same process of building a virtual dom and attaching events to make the page interactive — but for SSR, the user can start viewing the page while all of that is happening. For the CSR world, you need to wait for all of the above to happen and then have the virtual dom moved to the browser dom for the page to be viewable.</p></blockquote><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/06/csr-explanation.png?w=800&ssl=1"  /><h1 id="Next-js的优点"><a href="#Next-js的优点" class="headerlink" title="Next.js的优点"></a>Next.js的优点</h1><ul><li>更好的SEO</li><li>更快的首屏渲染速度</li></ul><h1 id="Next-js-基础-与Rect开发的不同之处"><a href="#Next-js-基础-与Rect开发的不同之处" class="headerlink" title="Next.js 基础(与Rect开发的不同之处)"></a>Next.js 基础(与Rect开发的不同之处)</h1><blockquote><p><a href="https://www.nextjs.cn/learn/basics/create-nextjs-app?utm_source=next-site&amp;utm_medium=nav-cta&amp;utm_campaign=next-website" target="_blank" rel="noopener">https://www.nextjs.cn/learn/basics/create-nextjs-app?utm_source=next-site&amp;utm_medium=nav-cta&amp;utm_campaign=next-website</a></p></blockquote><h2 id="路由映射"><a href="#路由映射" class="headerlink" title="路由映射"></a>路由映射</h2><blockquote><p>在 Next.js 中，一个 <strong>page（页面）</strong> 就是一个从 <code>.js</code>、<code>jsx</code>、<code>.ts</code> 或 <code>.tsx</code> 文件导出（export）的 <a href="https://reactjs.org/docs/components-and-props.html" target="_blank" rel="noopener">React 组件</a> ，这些文件存放在 <code>pages</code> 目录下。每个 page（页面）都使用其文件名作为路由（route）。</p></blockquote><pre><code class="js">pages/about.js/jsx/ts/tsx → /aboutpages/dashboard/settings/username.js → /dashboard/settings/username</code></pre><h2 id="自带路由：next-router-next-link"><a href="#自带路由：next-router-next-link" class="headerlink" title="自带路由：next/router next/link"></a>自带路由：<code>next/router</code> <code>next/link</code></h2><p>使用与<code>react-router</code>类似，包括编程式跳转<code>router.push</code>以及组件式跳转<code>&lt;Link href=&quot;/about&quot;&gt;&lt;a&gt;click me&lt;/a&gt;&lt;/Link&gt;</code></p><pre><code class="js">import { useRouter } from &#39;next/router&#39;;const router = useRouter();router.push({  pathname: &#39;/activities/experience-lesson/course-info&#39;,  query: { ...queryData, isFree: 0 }});router.push(&#39;/about&#39;)</code></pre><h2 id="渲染方式"><a href="#渲染方式" class="headerlink" title="渲染方式"></a>渲染方式</h2><h3 id="预渲染"><a href="#预渲染" class="headerlink" title="预渲染"></a>预渲染</h3><ul><li><strong>静态生成（Static Generation）</strong>（HTML重用、build生成）</li><li><strong>服务器端渲染（Server-side Rendering）</strong>（每次请求生成的HTML不同、用户请求时生成）</li></ul><h3 id="相关API"><a href="#相关API" class="headerlink" title="相关API"></a>相关API</h3><ul><li><p>静态生成</p><ul><li><code>getStaticProps(context)</code></li><li><code>getStaticPaths(context)</code></li></ul></li><li><p>服务器渲染</p><ul><li><code>getServerSideProps(context)</code></li></ul></li><li><p>客户端获取数据</p><ul><li>SWR（官方推荐）</li></ul></li></ul><p><strong>注意：</strong>在开发环境中<code>getStaticProps</code>和<code>getStaticPaths</code>每次请求都会被调用</p><p>使用，在<strong>页面</strong>文件中导出</p><pre><code class="js">function Page({ data }) {  // Render data...}// This gets called on every requestexport async function getServerSideProps() {  // Fetch data from external API  const res = await fetch(`https://.../data`)  const data = await res.json()  // Pass data to the page via props  return { props: { data } }}export default Page</code></pre><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><h2 id="配置Eslint-Prettier"><a href="#配置Eslint-Prettier" class="headerlink" title="配置Eslint+Prettier"></a>配置Eslint+Prettier</h2><blockquote><p><a href="https://github.com/paulolramos/eslint-prettier-airbnb-react" target="_blank" rel="noopener">https://github.com/paulolramos/eslint-prettier-airbnb-react</a></p><p><a href="https://dev.to/karlhadwen/setup-eslint-prettier-airbnb-style-guide-in-under-2-minutes-a27" target="_blank" rel="noopener">https://dev.to/karlhadwen/setup-eslint-prettier-airbnb-style-guide-in-under-2-minutes-a27</a></p><p><a href="https://dev.to/bybruno/configuring-absolute-paths-in-react-for-web-without-ejecting-en-us-52h6" target="_blank" rel="noopener">https://dev.to/bybruno/configuring-absolute-paths-in-react-for-web-without-ejecting-en-us-52h6</a></p></blockquote><p>解决<code>eslint</code>无法识别动态引入语法<code>import()</code>:</p><p><a href="https://github.com/eslint/eslint/issues/11486" target="_blank" rel="noopener">相关issue</a></p><pre><code class="js">// eslint 配置parserOptions: {  ecmaVersion: 2020, // Use the latest ecmascript standard  sourceType: &#39;module&#39;, // Allows using import/export statements  ecmaFeatures: {  jsx: true // Enable JSX since we&#39;re using React  }},</code></pre><h2 id="配置alias"><a href="#配置alias" class="headerlink" title="配置alias"></a>配置alias</h2><p><code>next.config.js</code>配置</p><pre><code class="js">/* eslint-disable no-param-reassign */const path = require(&#39;path&#39;);module.exports = {  webpack: (config) =&gt; {    // Note: we provide webpack above so you should not `require` it    // Perform customizations to webpack config    config.resolve.alias[&#39;@&#39;] = path.resolve(__dirname, &#39;./src&#39;);    // Important: return the modified config    return config;  }};</code></pre><p>eslint无法识别alias，需要在根目录下创建文件<code>jsconfig.json</code>并在<code>.eslintrc.js</code>    配置<code>settings</code></p><pre><code class="js">// .eslintrc.jsmodule.exports = {  root: true, // Make sure eslint picks up the config at the root of the directory  extends: [&#39;airbnb&#39;, &#39;airbnb/hooks&#39;, &#39;plugin:prettier/recommended&#39;, &#39;prettier/react&#39;],  env: {    browser: true,    commonjs: true,    es6: true,    jest: true,    node: true  },  globals: {    wx: true  },  parserOptions: {    ecmaVersion: 2020, // Use the latest ecmascript standard    sourceType: &#39;module&#39;, // Allows using import/export statements    ecmaFeatures: {      jsx: true // Enable JSX since we&#39;re using React    }  },  rules: {    &#39;react/react-in-jsx-scope&#39;: 0,    &#39;jsx-a11y/alt-text&#39;: 0, // img alt    &#39;react/prop-types&#39;: 0,    &#39;jsx-a11y/click-events-have-key-events&#39;: 0,    &#39;jsx-a11y/no-static-element-interactions&#39;: 0,    &#39;dot-notation&#39;: 0,    &#39;import/prefer-default-export&#39;: 0,    &#39;react/jsx-props-no-spreading&#39;: 0,    &#39;jsx-a11y/href-no-hash&#39;: [&#39;off&#39;],    &#39;react/no-array-index-key&#39;: 0,    &#39;no-console&#39;: 0,    &#39;no-alert&#39;: 0,    &#39;consistent-return&#39;: 0,    // eslint-disable-next-line prettier/prettier    eqeqeq: 1,    &#39;react/self-closing-comp&#39;: 0,    &#39;react-hooks/exhaustive-deps&#39;: 0,    &#39;react/no-danger&#39;: 0,    &#39;no-shadow&#39;: 0,    &#39;jsx-a11y/label-has-associated-control&#39;: 0,    &#39;react/jsx-filename-extension&#39;: [&#39;warn&#39;, { extensions: [&#39;.js&#39;, &#39;.jsx&#39;] }],    &#39;max-len&#39;: [      &#39;warn&#39;,      {        code: 120,        tabWidth: 2,        comments: 120,        ignoreComments: false,        ignoreTrailingComments: true,        ignoreUrls: true,        ignoreStrings: true,        ignoreTemplateLiterals: true,        ignoreRegExpLiterals: true      }    ]  },  settings: {    &#39;import/resolver&#39;: {      alias: {        map: [[&#39;@&#39;, &#39;./src&#39;]],        extensions: [&#39;.ts&#39;, &#39;.js&#39;, &#39;.jsx&#39;, &#39;.json&#39;]      }    }  }};</code></pre><pre><code class="json">{  &quot;compilerOptions&quot;: {    &quot;baseUrl&quot;: &quot;src&quot;,    &quot;paths&quot;: {      &quot;@/*&quot;: [&quot;./*&quot;]    }  },  &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;**/node_modules/*&quot;]}</code></pre><h2 id="封装axios在每次请求时显示spin组件"><a href="#封装axios在每次请求时显示spin组件" class="headerlink" title="封装axios在每次请求时显示spin组件"></a>封装axios在每次请求时显示<code>spin</code>组件</h2><p>这里要注意一点，由于服务端不存在<code>document</code>，所以要判断一下当前所处的环境再去执行操作。</p><pre><code class="jsx">import axios from &#39;axios&#39;;import ReactDOM from &#39;react-dom&#39;;import Spin from &#39;../components/Spin/Spin&#39;;const Axios = axios.create({  timeout: 20000});const csr = process.browser;// 当前正在请求的数量let requestCount = 0;function showLoading() {  if (requestCount === 0) {    var dom = document.createElement(&#39;div&#39;);    dom.setAttribute(&#39;id&#39;, &#39;loading&#39;);    document.body.appendChild(dom);    ReactDOM.render(&lt;Spin /&gt;, dom);  }  requestCount++;  console.log(&#39;showLoading&#39;, requestCount);}function hideLoading() {  requestCount--;  if (requestCount === 0) {    document.body.removeChild(document.getElementById(&#39;loading&#39;));  }  console.log(&#39;hideLoading&#39;, requestCount);}Axios.interceptors.request.use(  (config) =&gt; {    csr &amp;&amp; showLoading();    return config;  },  (err) =&gt; {    csr &amp;&amp; hideLoading();    return Promise.reject(err);  });Axios.interceptors.response.use(  (res) =&gt; {    csr &amp;&amp; hideLoading();    return res;  },  (err) =&gt; {    csr &amp;&amp; hideLoading();    return Promise.reject(err);  });export default Axios;</code></pre><h2 id="自定义input-hook"><a href="#自定义input-hook" class="headerlink" title="自定义input hook"></a>自定义input hook</h2><p>使用后可以免去给每个表单组件设置<code>onChange</code></p><pre><code class="jsx">import { useState } from &#39;react&#39;;// 自定义input hook// 参考资料：https://rangle.io/blog/simplifying-controlled-inputs-with-hooks/export function useInput(initialValue) {  const [value, setValue] = useState(initialValue);  return {    value,    setValue,    reset: () =&gt; setValue(&#39;&#39;),    bind: {      value,      onChange: (e) =&gt; {        setValue(e.target.value);      }    }  };}</code></pre><p>使用：</p><pre><code class="jsx">// 没使用前const [phone, setPhone] = useState(&#39;&#39;);&lt;input  name=&quot;phone&quot;  type=&quot;number&quot;  placeholder=&quot;请输入您的手机号码(必填)&quot;  className={`${styles[&#39;cell-content&#39;]} ${styles[&#39;cell-content-right&#39;]}`}  value={phone}  onChange={() =&gt; setPhone(e.target.value)}/&gt;// 使用后const { value: phone, bind: bindPhone } = useInput(&#39;&#39;);&lt;input  name=&quot;phone&quot;  type=&quot;number&quot;  placeholder=&quot;请输入您的手机号码(必填)&quot;  className={`${styles[&#39;cell-content&#39;]} ${styles[&#39;cell-content-right&#39;]}`}  {...bindPhone}/&gt;</code></pre><h2 id="封装Dialog"><a href="#封装Dialog" class="headerlink" title="封装Dialog"></a>封装Dialog</h2><pre><code class="jsx">import { createPortal } from &#39;react-dom&#39;;import styles from &#39;./Modal.module.css&#39;;export default function Modal({ content, show, onOk }) {  const modal = show &amp;&amp; (    &lt;div className={styles[&#39;overlay&#39;]}&gt;      &lt;div className={styles[&#39;modal&#39;]}&gt;        {/* 防止冒泡关闭窗口 */}        &lt;div className={styles[&#39;wrapper&#39;]} onClick={(e) =&gt; e.stopPropagation()}&gt;          &lt;div className={styles[&#39;content&#39;]}&gt;{content}&lt;/div&gt;          &lt;div className={styles[&#39;readed_btn&#39;]} onClick={() =&gt; onOk()}&gt;            好 的          &lt;/div&gt;        &lt;/div&gt;      &lt;/div&gt;    &lt;/div&gt;  );  const ProtalContent = () =&gt; {    // 用来处理服务端不存在document的问题    try {      // 将modal挂在到body上      return document &amp;&amp; createPortal(modal, document.body);    } catch (error) {      return null;    }  };  // 动态引入组件  // import dynamic from &#39;next/dynamic&#39;;  // const Modal = dynamic(() =&gt; import(&#39;./components/Modal/Modal&#39;), { ssr: false });  return (    &lt;&gt;      &lt;ProtalContent /&gt;    &lt;/&gt;  );}</code></pre><h2 id="移动端适配"><a href="#移动端适配" class="headerlink" title="移动端适配"></a>移动端适配</h2><p>使用插件<code>postcss-px-to-viewport</code></p><p>在根目录下新建文件<code>postcss.config.js</code></p><pre><code class="js">module.exports = {  plugins: {    &#39;postcss-px-to-viewport&#39;: {      // 视窗的宽度，对应的是我们设计稿的宽度，我们公司用的是375      viewportWidth: 375,      // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置      // viewportHeight: 1334,      // 指定`px`转换为视窗单位值的小数位数      unitPrecision: 3,      // 指定需要转换成的视窗单位，建议使用vw      viewportUnit: &#39;vw&#39;,      // 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名      selectorBlackList: [&#39;.ignore&#39;],      // 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值      minPixelValue: 1,      // 允许在媒体查询中转换`px`      mediaQuery: false      // exclude: undefined    }  }};</code></pre><h2 id="使用Docker-coding实现自动化部署"><a href="#使用Docker-coding实现自动化部署" class="headerlink" title="使用Docker+coding实现自动化部署"></a>使用Docker+coding实现自动化部署</h2><h3 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h3><pre><code class="dockerfile"># node版本号FROM node:12-alpine# docker build时传进来的值 docker image build -t &lt;name&gt; --build-arg API_ENV=development .ARG API_ENVRUN echo ${API_ENV}ENV NEXT_PUBLIC_API_ENV=${API_ENV}# Create app directoryRUN mkdir -p /usr/src/appWORKDIR /usr/src/app# Install app dependenciesCOPY package*.json /usr/src/app/RUN npm install# Bundle app sourceCOPY . /usr/src/appRUN npm run buildEXPOSE 3000CMD [ &quot;npm&quot;, &quot;run&quot;, &quot;start&quot; ]</code></pre><p>在coding上设置代码push触发规则，触发生成制品库。</p><h2 id="使用redux"><a href="#使用redux" class="headerlink" title="使用redux"></a>使用redux</h2><blockquote><p><a href="https://github.com/vercel/next.js/tree/canary/examples/with-redux" target="_blank" rel="noopener">https://github.com/vercel/next.js/tree/canary/examples/with-redux</a></p><p><a href="https://github.com/vercel/next.js/tree/canary/examples/with-redux-thunk" target="_blank" rel="noopener">https://github.com/vercel/next.js/tree/canary/examples/with-redux-thunk</a></p></blockquote><p>里面有使用到一个js新特性<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" target="_blank" rel="noopener">Nullish coalescing operator</a></p><h1 id="Next-js-踩坑"><a href="#Next-js-踩坑" class="headerlink" title="Next.js 踩坑"></a>Next.js 踩坑</h1><h2 id="环境变量配置"><a href="#环境变量配置" class="headerlink" title="环境变量配置"></a>环境变量配置</h2><p>环境变量在客户端无法获取，背景：由于我在项目中需要根据环境变量来使用不同环境的API域名。</p><p>解决方案：官方提供了以<code>NEXT_PUBLIC_</code>开头的环境变量名，这样就可以在客户端和服务端都访问得到环境变量了。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> Next.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React入门学习总结</title>
      <link href="/posts/c05e5480/"/>
      <url>/posts/c05e5480/</url>
      
        <content type="html"><![CDATA[<p>总结学习React以及相关插件时遇到的难点以及重点</p><a id="more"></a><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="http://img.doutula.com/production/uploads/image/2018/03/15/20180315080324_kYaXfj.jpg" alt=""></p><h3 id="基础知识点"><a href="#基础知识点" class="headerlink" title="基础知识点"></a>基础知识点</h3><ul><li><p>单向数据流（子组件不能修改父组件数据）</p></li><li><p>组件名首字母大写</p></li><li><p>可以使用&lt;React.Fragment&gt;&lt;/ React.Fragment&gt;和&lt;&gt;&lt;/&gt;包裹标签</p></li><li><p>关键字</p><ul><li>class-&gt;className</li><li><code>&lt;label for=&quot;id名&quot;&gt;&lt;/lable&gt;</code>-&gt;<code>&lt;label htmlFor=&quot;id名&quot;&gt;&lt;/lable&gt;</code>用来扩大点击范围</li></ul></li><li><p>不要直接修改state要使用this.setState()</p></li><li><p>this指向问题</p><pre><code>// 在constructor使用bind，无法传参数this.handlerClick = this.handlerClick.bind(this);// 调用时使用bind，对性能优化不友好,因为每次render()时都要重新bindonChange={this.handlerClick.bind(this,num)}</code></pre><pre><code>// 使用箭头函数onChange={e =&gt; this.handlerClick(num)}</code></pre><pre><code>// 声明为箭头函数,无法传参handlerClick = (num) =&gt; {};</code></pre></li><li><p>循环渲染加key，不要使用index作为key值。</p></li><li><p>注释写法{/**/}</p></li><li><pre><code>dangerouslySetInnerHTML={{__html: item(需要展示的数据)}} // 不转义html标签</code></pre></li><li><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#setstate" target="_blank" rel="noopener">setState()</a>第二个参数为回调函数</p></li><li><p>一旦state、props变化，render()就会执行。也就是说一旦父组件state变化时，render()会执行所以其父组件的中的子组件也会再render()一遍。</p></li><li><p>动画组件<a href="https://reactcommunity.org/react-transition-group/" target="_blank" rel="noopener">react-transition-group</a></p></li><li><p>当组件中只有render()时，可以把它声明成一个无状态组件，可以提升性能</p></li><li><p>ref用来获取dom元素，<code>ref={(element) =&gt; {}}</code>element为该元素</p></li></ul><h3 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h3><h4 id="父-gt-子"><a href="#父-gt-子" class="headerlink" title="父-&gt;子"></a>父-&gt;子</h4><p>通过属性传递，子组件通过this.props接受，父组件值的改变会直接影响到子组件。</p><p>父组件</p><pre><code class="jsx">// 父组件中使用子组件const name = &#39;Alan&#39;&lt;Child name={name} /&gt;</code></pre><p>子组件</p><pre><code class="jsx">&lt;div&gt;{this.props.name}&lt;/div&gt;</code></pre><h4 id="子-gt-父亲"><a href="#子-gt-父亲" class="headerlink" title="子-&gt;父亲"></a>子-&gt;父亲</h4><p>父组件将自己方法传递给子组件，子组件通过添加事件来调用该方法。这样就可以达到子组件修改父组件数据的目的，同时可以将子组件的数据传递给父组件。</p><p>父组件</p><pre><code class="jsx">this.state = {    list: [1,2,3]}&lt;Child handlerEvent={this.deleteItem.bind(this)} /&gt;// 方法deleteItem(index) {    const list = [...this.state.list];    list.splice(index,1);    this.setState({        list,    });}</code></pre><p>子组件</p><pre><code class="jsx">&lt;button onClick = {() =&gt; this.props.handlerEvent(1)}&gt;&lt;/button&gt;</code></pre><h3 id="props参数校验及默认值"><a href="#props参数校验及默认值" class="headerlink" title="props参数校验及默认值"></a>props参数校验及默认值</h3><p><a href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener">具体参数</a></p><pre><code class="jsx">import PropTypes from &#39;prop-types&#39;;// 参数校验// Child为组件名// 定义this.props.content为string类型并且为必须参数Child.propTypes = {  content: PropTypes.string.isRequired,};// 参数默认值Child.defaultProps = {  mobile: &#39;none&#39;,};</code></pre><h3 id="异步组件加载插件react-loadable"><a href="#异步组件加载插件react-loadable" class="headerlink" title="异步组件加载插件react-loadable"></a>异步组件加载插件<a href="https://github.com/jamiebuilds/react-loadable" target="_blank" rel="noopener">react-loadable</a></h3><p>使用方式</p><pre><code class="jsx">import React, { Component } from &#39;react&#39;;import Loadable from &#39;react-loadable&#39;;const LoadableComponent = Loadable({  // 需要异步引入的组件  loader: () =&gt; import(&#39;./index&#39;),  loading() {    // 加载时进行的操作，这里显示loading提升用户体验    return &lt;div&gt;loading...&lt;/div&gt;;  },});export default class App extends Component {  render() {    return &lt;LoadableComponent /&gt;;  }}</code></pre><h3 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h3><p><strong>何为虚拟DOM</strong></p><p>使用JS对象来描述真实DOM，虚拟DOM（JS对象）的操作性能要远远优于真实DOM操作性能。</p><p>通过<code>React.createElement(type, [props], [...children])</code>来生成虚拟DOM</p><p>优点：</p><ul><li><p>DOM操作很耗性能，虚拟DOM操作性能好</p></li><li><p>无需替换全部DOM，通过diff算法比对替换局部改变的DOM</p></li><li><p>由于使用了虚拟DOM，有利于原生应用的开发（RN），因为DOM是存在于浏览器中的。</p></li></ul><p>出于性能考虑，react将多次setState(异步函数)合并成一次setState，因为setState会导致虚拟DOM进行diff对比。</p><p><strong>同层比对</strong></p><p><a href="https://segmentfault.com/a/1190000000606216" target="_blank" rel="noopener">diff算法</a></p><h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><ul><li>mounting<ul><li>componentWillMount()/UNSAFE_componentWillMount()</li><li>render()</li><li>componentDidMount()应用场景：发送请求</li></ul></li><li>updation(props/state发生变化)<ul><li><a href="https://reactjs.org/docs/react-component.html#unsafe_componentwillreceiveprops" target="_blank" rel="noopener"><code>componentWillReceiveProps()</code></a>将废除</li><li><code>shouldComponentUpdate(): boolean</code>更新之前，返回true时才会更新</li><li>render()</li><li>componentDidUpdate()</li></ul></li><li>unmounting<ul><li>componentWillUnmount()</li></ul></li></ul><p>性能优化</p><pre><code class="js">// 只有当子组件数据变化时才去执行render()shouldComponentUpdate(nextProps, nextState) {    return nextProps.content !== this.props.content;    // 防止更新影响性能}</code></pre><p>也可以使用组件去继承<code>React.PureComponent</code>以达到和上面一样的效果，但是应该减少使用，因为它存在一些问题。<a href="https://reactjs.org/docs/render-props.html#be-careful-when-using-render-props-with-reactpurecomponent" target="_blank" rel="noopener">问题</a></p><p><strong>在hook中也有类似的API：useMemo和useCallback</strong></p><blockquote><p>useMemo参考资料：</p><p><a href="https://www.robinwieruch.de/react-usememo-hook" target="_blank" rel="noopener">How to useMemo in React</a></p></blockquote><p>可以使用Charles实现接口mock。localhost-&gt;本地文件.json</p><h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200622095821817.png" alt="image-20200622095821817"></p><p><strong>思路：</strong></p><p>组件通过<strong>dispatch(action)</strong>来通知store，store根据action来调用对应的reducers来操作store副本，reducers将处理好的数据返回给store。</p><p>store和组件之间通过，<code>store.subscribe(this.setState(store.getState()))</code>来同步最新的store数据。</p><ol><li>创建store(<strong>createStore()</strong>)</li></ol><pre><code class="js">import { createStore } from &quot;redux&quot;;import reducer from &quot;./reducer&quot;;// 第二个参数配置后可以使用谷歌redux插件const store = createStore(  reducer,  window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__());export default store;</code></pre><ol start="2"><li>创建reducer（管理操作数据store副本）</li></ol><pre><code class="js">const defaultState = {  todoText: &#39;&#39;};export default (state = defaultState, action) =&gt; {  if (action.type === &#39;action的type&#39;) {    let newState = JSON.parse(JSON.stringify(state));    // 更新store    newState.todoText = action.value;    return newState;  }  return state;}</code></pre><p>可以通过<strong>store.getState()</strong>来获取store中的数据，给组件赋初值</p><pre><code class="js">this.state = store.getState();</code></pre><ol start="3"><li>创建action</li></ol><pre><code class="js">const action = {    type: &#39;&#39;,    value: &#39;&#39; // 要改变的值}</code></pre><ol start="4"><li>通过store.dispatch(action)通知store，reducer将接收到修改之前的state和action</li><li>reducer更新state的副本，将新state返回给store</li><li>使用store的组件中通过<code>store.subscribe(this.setState(store.getState()))</code>订阅store来同步最新的store</li></ol><p>为了提高代码健壮性和可维护性，把action单独声明为一个文件，并且把<code>action.type</code>声明为一个常量文件。</p><pre><code>store ├── actionCreators.js // 生成action ├── actionType.js // action type对应的常量 ├── index.js └── reducer.js</code></pre><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">index.js</a></li><li class="tab"><a class="#2-2">actionCreators.js</a></li><li class="tab"><a class="#2-3">reducer.js</a></li><li class="tab"><a class="#2-4">actionType.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="js"><span class="keyword">import</span> { createStore } <span class="keyword">from</span> <span class="string">'redux'</span>;<span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;<span class="keyword">const</span> store = createStore(    reducer,    <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION__());<span class="keyword">export</span> <span class="keyword">default</span> store;</code></pre></div><div class="tab-pane" id="2-2"><pre><code class="js"><span class="keyword">import</span> { INPUT_CHANGE } <span class="keyword">from</span> <span class="string">'./actionType'</span>;<span class="keyword">export</span> <span class="keyword">const</span> changeInputAction = <span class="function">(<span class="params">value</span>) =&gt;</span> ({  type: INPUT_CHANGE,  value,});</code></pre></div><div class="tab-pane" id="2-3"><pre><code class="js"><span class="keyword">import</span> { INPUT_CHANGE } <span class="keyword">from</span> <span class="string">'./actionType'</span>;<span class="keyword">const</span> defaultState = {  todoText: <span class="string">''</span>,};<span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; {  <span class="keyword">if</span> (action.type === INPUT_CHANGE) {    <span class="keyword">let</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state));    newState.todoText = action.value;    <span class="keyword">return</span> newState;  }  <span class="keyword">return</span> state;}</code></pre></div><div class="tab-pane" id="2-4"><pre><code class="js"><span class="keyword">export</span> <span class="keyword">const</span> INPUT_CHANGE = <span class="string">'inputChange'</span>;</code></pre></div></div></div><div class="note info"><p>reducers函数的返回值要是可预测，也就是说里面不能写类似new Date,Ajax等的不可预测结果的代码</p></div><div class="note info"><p>reducers不能修改原来的state，只能返回一个新的state，为了防止被误改造成bug，可以使用immutable.js来解决，它可以将state数据转化成一个特定的对象</p></div><pre><code>npm i immutable redux-immutable -S</code></pre><ul><li>immutable对象通过<code>get()</code>和<code>set()</code>等api来操作数据，当有多个<code>set()</code>连用时可以使用<code>merge({})</code>来实现</li><li><code>immutable</code>通过<code>fromJS</code>可以将state转化成immutable对象，通过<code>toJS()</code>将immutable对象转化成js对象</li><li><code>redux-immutable</code>也提供了<code>combineReducers</code>，结合不同模块的reducers的同时还可以将state转化成immutable对象。</li></ul><p><strong>当项目越来越大时，项目中的reducer.js文件也会越来越臃肿，这个时候我们可以通过redux提供的<code>combineReducers</code>来将reducer拆分成不同的模块</strong>。</p><pre><code class="js">import { combineReducers } from &#39;redux&#39;;import mAReducer from &#39;../mAReducer/store/reducer&#39;;import mBReducer from &#39;../mBReducer/store/reducer&#39;;export default combineReducers({  A: mAReducer,  B: mBReducer,});// 这样我们在使用mAReducer中的数据是就要通过state.A.xxx来获取其数据了</code></pre><h3 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h3><p>中间件：位于action和store之间</p><p>redux-thunk可以让redux使用异步操作</p><p>使用方式</p><pre><code class="js">import { createStore, applyMiddleware, compose } from &#39;redux&#39;;import reducer from &#39;./reducer&#39;;import thunk from &#39;redux-thunk&#39;;const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__  ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})  : compose;const enhancer = composeEnhancers(applyMiddleware(thunk));const store = createStore(reducer, enhancer);export default store;</code></pre><p>例子</p><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">actionCreators.js</a></li><li class="tab"><a class="#3-2">组件使用</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js"><span class="keyword">export</span> <span class="keyword">const</span> setTodoList = <span class="function">(<span class="params">list</span>) =&gt;</span> ({  type: GET_TODOLIST,  list,});<span class="keyword">export</span> <span class="keyword">const</span> getTodoList = <span class="function"><span class="params">()</span> =&gt;</span> {  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> {    axios.get(<span class="string">'http://localhost:8888/test/getTodoList'</span>)    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> {      <span class="keyword">const</span> todoList = res.data.datas;      <span class="keyword">const</span> action = setTodoList(todoList);      dispatch(action);    });  }};</code></pre></div><div class="tab-pane" id="3-2"><pre><code class="js">componentDidMount() {    <span class="keyword">const</span> action = getTodoList();    store.dispatch(action);}</code></pre></div></div></div><h3 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h3><p>使用方式</p><div class="tabs" id="4"><ul class="nav-tabs"><li class="tab active"><a class="#4-1">index.js</a></li><li class="tab"><a class="#4-2">actionCreators.js</a></li><li class="tab"><a class="#4-3">sagas.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="4-1"><pre><code class="js"><span class="keyword">import</span> { createStore, applyMiddleware, compose } <span class="keyword">from</span> <span class="string">'redux'</span>;<span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;<span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">'redux-saga'</span>;<span class="keyword">import</span> mySaga <span class="keyword">from</span> <span class="string">'./sagas'</span>;<span class="keyword">const</span> sagaMiddleware = createSagaMiddleware();<span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__  ? <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})  : compose;<span class="keyword">const</span> enhancer = composeEnhancers(applyMiddleware(sagaMiddleware));<span class="keyword">const</span> store = createStore(reducer, enhancer);sagaMiddleware.run(mySaga);<span class="keyword">export</span> <span class="keyword">default</span> store;</code></pre></div><div class="tab-pane" id="4-2"><pre><code class="js"><span class="keyword">export</span> <span class="keyword">const</span> getSaga = <span class="function">(<span class="params">list</span>) =&gt;</span> ({  type: GET_SAGA,  list,});</code></pre></div><div class="tab-pane" id="4-3"><pre><code class="js"><span class="keyword">import</span> { takeEvery } <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span>;<span class="keyword">import</span> { GET_SAGA } <span class="keyword">from</span> <span class="string">'./actionType'</span>;<span class="function"><span class="keyword">function</span>* <span class="title">getList</span>(<span class="params"></span>) </span>{  <span class="built_in">console</span>.log(<span class="string">'进行异步操作了'</span>);}<span class="function"><span class="keyword">function</span>* <span class="title">mySaga</span>(<span class="params">action</span>) </span>{  <span class="comment">// 当dispatch的action.type = GET_SAGA时，调用getList方法</span>  <span class="keyword">yield</span> takeEvery(GET_SAGA, getList);}<span class="keyword">export</span> <span class="keyword">default</span> mySaga;</code></pre></div></div></div><h3 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h3><p>使用<code>Provider</code>和<code>connect</code>实现store的共享，之前的写法是需要在需要使用store的组件中引入store，并通过<code>store.subscribe</code>和<code>store.getState</code>来同步和获取最新的store内容。</p><pre><code class="jsx">&lt;Provider store={store}&gt;    {/* 包裹需要使用store的组件 */}    &lt;App /&gt;&lt;/Provider&gt;</code></pre><p>Demo.js</p><pre><code class="jsx">import { deleteTodoItemAction } from &#39;../../store/actionCreators&#39;;// 将store中的state的数据映射到组件的props中const mapStateToProps = (state) =&gt; ({  ...state,});// 将dispatch映射到props中const mapDispatchToProps = (dispatch) =&gt; {  return {    deleteTodoItem(index) {      const action = deleteTodoItemAction(index);      dispatch(action);    }  };};// Demo为需要使用store的组件connect(mapStateToProps, mapDispatchToProps)(Demo);</code></pre><hr><h4 id="hook"><a href="#hook" class="headerlink" title="hook"></a>hook</h4><p>如果使用的是hook进行开发的话，可以使用<a href="https://react-redux.js.org/next/api/hooks" target="_blank" rel="noopener">react-redux</a>提供的<code>hook</code>api来简化书写,并且不需要使用<code>connect()</code>来包裹组件，<strong>但是仍然需要使用<code>Provider</code>包裹父组件</strong></p><pre><code class="jsx">import { useSelector, useDispatch } from &#39;react-redux&#39;import { deleteTodoItemAction } from &#39;../../store/actionCreators&#39;;// 等同于前面的mapStateToPropsconst counter = useSelector(state =&gt; state.counter)const dispatch = useDispatch()// 使用dispatch(deleteTodoItemAction)</code></pre><ul><li><code>useSelector</code>：返回state中的值，当一个<code>action</code>被<code>dispatch</code>时，<code>useSelector</code>会把之前的selector返回的结果和现在的结果进行<code>浅</code>比较（默认深比较<code>===</code>），如果不相同的话组件会被强制渲染，否则不会。</li></ul><h3 id="css写法"><a href="#css写法" class="headerlink" title="css写法"></a>css写法</h3><p>react不像vue那样可以优雅的在vue文件中写css代码，不过react也提供了几种css书写方式（待补充）</p><ul><li>css in js</li><li>使用styled-components</li><li>css-module（依赖于webpack）</li></ul><p>styled-components(使用js编写css代码)</p><div class="tabs" id="5"><ul class="nav-tabs"><li class="tab active"><a class="#5-1">style.js</a></li><li class="tab"><a class="#5-2">使用方式</a></li></ul><div class="tab-content"><div class="tab-pane active" id="5-1"><pre><code class="js"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">'styled-components'</span>;<span class="keyword">export</span> <span class="keyword">const</span> Logo = styled.a.attrs({  href: <span class="string">'/'</span>,})<span class="string">`</span><span class="string">  position: absolute;</span><span class="string">  top: 0;</span><span class="string">  left: 0;</span><span class="string">  background: url(<span class="subst">${(props) =&gt; props.imgUrl}</span>);</span><span class="string">`</span>;</code></pre></div><div class="tab-pane" id="5-2"><pre><code class="jsx"><span class="keyword">import</span> React, { Component } <span class="keyword">from</span> <span class="string">'react'</span>;<span class="keyword">import</span> { Logo } <span class="keyword">from</span> <span class="string">'./style'</span>;<span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{  <span class="keyword">constructor</span>(props) {    <span class="keyword">super</span>(props);    <span class="keyword">this</span>.state = {};  }  render() {    <span class="keyword">return</span> (        &lt;Logo imgUrl=<span class="string">"xxx"</span>/&gt;    );  }}<span class="keyword">export</span> <span class="keyword">default</span> Header;</code></pre></div></div></div><p>上面这种写法等同于</p><pre><code class="jsx">render() {    return (        &lt;a href=&quot;/&quot; style={{position: "absolute", top: 0, left: 0}}&gt;&lt;/a&gt;    );}</code></pre><h3 id="react-router"><a href="#react-router" class="headerlink" title="react-router"></a>react-router</h3><pre><code>npm i react-router-dom -S</code></pre><p>使用方式</p><pre><code class="jsx">import React from &#39;react&#39;;import Header from &#39;./common/header&#39;;import store from &#39;./store&#39;;import { BrowserRouter as Router, Route } from &#39;react-router-dom&#39;;import { Provider } from &#39;react-redux&#39;;import Home from &#39;./pages/home&#39;;import Detail from &#39;./pages/detail&#39;;function App() {  return (    &lt;Provider store={store}&gt;      &lt;Router&gt;        &lt;Header /&gt;        &lt;Route path=&quot;/&quot; exact component={Home}&gt;&lt;/Route&gt;        &lt;Route path=&quot;/detail&quot; exact component={Detail}&gt;&lt;/Route&gt;      &lt;/Router&gt;    &lt;/Provider&gt;  );}export default App;</code></pre><p><strong>exact为精准匹配路由</strong></p><p>页面跳转，使用<code>react-router-dom</code>中的<code>&lt;Link to=&quot;xxx&quot;&gt;&lt;/Link&gt;</code>，重定向使用<code>&lt;Redirect to=&quot;xxx&quot;&gt;&lt;/Redirect&gt;</code></p><p>编程式写法：</p><p><code>this.props.history.(push()/goBack(num)/go()/replace())</code></p><p><strong>动态路由</strong></p><pre><code class="jsx">&lt;Route path=&quot;/post/:id&quot; exact component={POST}&gt;&lt;/Route&gt;// POST组件通过this.props.match.params.id来获取id值</code></pre><p><strong>可以使用withRouter包裹组件来获取history</strong></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>React对比Vue来说，学习成本比较高，但是比较灵活。而vue提供了很多封装好的api，学习起来对小白比较友好。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript学习总结（一）</title>
      <link href="/posts/fc7889ef/"/>
      <url>/posts/fc7889ef/</url>
      
        <content type="html"><![CDATA[<p>TypeScript常用知识点总结</p><a id="more"></a><h3 id="什么是TypeScript"><a href="#什么是TypeScript" class="headerlink" title="什么是TypeScript"></a>什么是TypeScript</h3><p>TypeScript是JavaScript的一个超集，在JavaScript的基础上增加了可选的<strong>静态类型</strong>和基于类的面向对象编程。它可以编译成纯JavaScript，未编译的ts代码无法在浏览器执行。我们可以把它和JavaScript的关系理解成css和less、sass的关系。</p><h3 id="TypeScript好在哪里"><a href="#TypeScript好在哪里" class="headerlink" title="TypeScript好在哪里"></a>TypeScript好在哪里</h3><ul><li>TS可以进行动态类型检测，可以检测出一些潜在的bug（例如拼写错误、参数缺失、undefined等），提升代码健壮性</li><li>使用vscode进行开发可以很好的提示代码，提高开发效率</li><li>代码可读性好</li></ul><h3 id="创建第一个TypeScript文件"><a href="#创建第一个TypeScript文件" class="headerlink" title="创建第一个TypeScript文件"></a>创建第一个TypeScript文件</h3><p>首先安装TypeScript</p><pre><code>npm install -g typescript</code></pre><p>安装后看是否成功</p><pre><code>tsc --version</code></pre><p>我安装后出现了以下问题：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200614175730166.png" alt="image-20200614175730166"><br>这种情况只需要以管理员的身份打开命令行运行以下命令：</p><pre><code>set-ExecutionPolicy RemoteSigned</code></pre><p>创建第一个ts文件<code>Hello.ts</code></p><pre><code class="tsx">function sayHello(name:String) {  console.log(`Hello ${name}`);}let person = &quot;Alan&quot;;sayHello(person);</code></pre><p>我们发现ts代码和普通的js代码在<code>sayHello</code>函数的参数上有所不同。<br><code>sayHello(name: String)</code><br>大致的意思就是<code>sayHello</code>传入一个名为name的参数，该参数的类型必须是<code>String</code>，不然无法通过ts的编译。<br>代码写好后用tsc编译上面的<code>Hello.ts</code>文件</p><pre><code>tsc Hello.ts</code></pre><p>编译成功后在同级目录下生成一个<code>Hello.js</code>文件，可以看到生成的js文件只是将es6语法转化成了es5语法，并没有改变其他代码。</p><pre><code class="js">function sayHello(name) {    console.log(&quot;Hello &quot; + name);}var person = &quot;Alan&quot;;sayHello(person);</code></pre><p>如果把<code>Hello.ts</code>文件改写一下</p><pre><code class="tsx">function sayHello(name:String) {  const text = 3 + name;  console.log(`Hello ${name}`);}let person = 123;sayHello(person);</code></pre><p>再次编译发现会报错但是仍然能生成js文件：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200614180440953.png" alt="image-20200614180440953"></p><p>上面错误的具体意思是</p><ul><li>由于声明了函数形参<code>name</code>为静态类型<code>string</code>，而在调用时传入得是number类型<code>123</code>，与前面的string不符。</li><li>在<code>sayHello</code>函数中将<code>name(string)</code>和<code>3(number)</code>两种不同类型得值进行了相加。</li></ul><p>我们发现每次都要通过tsc来编译ts文件能得到js文件后再去运行js文件，过于麻烦。可以使用插件<code>ts-node</code>来直接运行ts文件。</p><pre><code>npm i ts-node -g</code></pre><pre><code>ts-node Hello.ts</code></pre><blockquote><p>ts能够尝试分析变量类型（类型推断），ts无法分析出的变量最好显式声明变量类型（类型注解）</p></blockquote><h3 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a>基础类型</h3><p>变量的声明：<code>let [变量名] : [类型] = 值</code></p><p>例如： <code>let age: number =  21</code></p><p>TypeScript支持与JavaScript几乎相同的数据类型</p><ul><li>boolean(布尔值)</li><li>number(数值)</li><li>string(字符串)</li><li>[]/Array&lt;元素类型&gt;(数组)</li><li>元组Tuple</li><li>enum(枚举)</li><li>any(任何值)</li><li>void(空值)</li><li>null</li><li>undefined</li><li>never</li></ul><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>有2种方式定义数组</p><pre><code class="tsx">let arr : number[] = [1,2,3] // 元素类型后接上`[]`let arr : Array&lt;number&gt; = [1,2,3] // 数组泛型let arr: (number | string)[] = [1, &#39;2&#39;, &#39;4&#39;] // 元素类型可以是number或string（类似元组）</code></pre><h3 id="元组tuple"><a href="#元组tuple" class="headerlink" title="元组tuple"></a>元组tuple</h3><p>表示一个数组（各个元素的类型不必相同）</p><pre><code class="tsx">let list : [string, number]; //第一个元素为string类型，第二个为number类型a = [&#39;abc&#39;, 123] //合格b = [123, &#39;abc&#39;] //不合格</code></pre><h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><p>其实有点类似对象<br>看例子吧</p><pre><code class="tsx">enum lan {js, ts, css};console.log(lan.js); // 0   js对应的下标，第一个默认下标为0enum lan {  js = 3,  ts,  css,}console.log(lan.js); // 3console.log(lan.ts); // 4console.log(lan.css); // 5enum lan {  js,  ts = 3,  css,}console.log(lan.js); // 0console.log(lan.ts); // 3console.log(lan.css); // 4console.log(lan[4]); // cssconsole.log(lan[1]); // undefined// 第一个默认下标为0，css接着ts的值+1enum lan {js = &#39;good&#39;, ts = &#39;nice&#39;, css = &#39;well&#39;};console.log(lan.js); // good</code></pre><h3 id="any"><a href="#any" class="headerlink" title="any"></a>any</h3><p>顾名思义，任意值，当我们想为还不清楚类型的变量指定一个类型时，<code>any</code>就是最好的选择🤭</p><pre><code class="tsx">let a:any =4;a = &#39;123&#39;; //合格let arr : any[] = [1, &#39;123&#39;, true]; // 和元组很像arr[1] = &#39;good&#39;;</code></pre><h3 id="void"><a href="#void" class="headerlink" title="void"></a>void</h3><p>常用于无返回值的函数声明</p><pre><code class="tsx">function func() : void {  console.log(&#39;learning typescript...&#39;);}func(); //合格function func() : void {  return 1;}func(); // 不合格：Type &#39;1&#39; is not assignable to type &#39;void&#39;</code></pre><h3 id="null和undefined"><a href="#null和undefined" class="headerlink" title="null和undefined"></a>null和undefined</h3><p>用处不大，默认情况下是所有类型的子类型，例如下面代码是没有问题的：</p><pre><code class="tsx">let a:string;a = undefined;a = null;</code></pre><p><strong>但是</strong>，当指定<code>--strictNullChecks</code>标记时，null和undefined只能赋值给void和他们自己本身。</p><h3 id="never"><a href="#never" class="headerlink" title="never"></a>never</h3><p>表示永不存在的值的类型<br>never类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型；<br>变量也可能是never类型，当它们被永不为真的类型保护所约束时。</p><p>never类型是任何类型的子类型，也可以赋值给任何类型；然而，没有类型是never的子类型或可以赋值给never类型（除了never本身之外）。 即使any也不可以赋值给never。</p><pre><code class="tsx">function error(message:string) : never{  throw new Error(message);}// 返回never的函数必须存在无法达到的终点function infiniteLoop(): never {  while (true) {  }}</code></pre><h3 id="结构赋值的写法"><a href="#结构赋值的写法" class="headerlink" title="结构赋值的写法"></a>结构赋值的写法</h3><pre><code class="tsx">function sayAge({name, age}: {name: string | number, age: number}): void {  console.log(`${name} is ${age} years old`);}sayAge({name: &#39;Alan&#39;, age: 22})sayAge({name: 2, age: 22})</code></pre><h3 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h3><p>用<code>|</code>来表示取值存在多种可能</p><pre><code class="tsx">let a: string | number;a = 1;a = &#39;A&#39;;</code></pre><h3 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h3><p>可以自己指定一个值的类型<br>格式如下<br><code>&lt;类型&gt;值</code><br><code>值 as 类型</code></p><pre><code class="tsx">interface student {  isStudent: boolean;  education: number;}interface worker {  isStudent: boolean;  seniority: number;}function Recruit(candidate: worker | student): void {  if (candidate.isStudent) {    console.log(`your education is ${(candidate as student).education}`);  } else {    console.log(`your seniority is ${(candidate as worker).seniority}`);  }}const a: student = { isStudent: true, education: 4 };const b: worker = { isStudent: false, seniority: 2 };Recruit(a);Recruit(b);</code></pre><p>由于<code>candidate</code>使用了联合类型，所以ts无法判断<code>candidate</code>究竟是属于<code>student</code>还是<code>worker</code>，所以要使用类型断言来显式告诉ts。</p><p>当然还有其他方式来实现</p><pre><code class="tsx">interface student {  isStudent: boolean;  education: number;}interface worker {  isStudent: boolean;  seniority: number;}function Recruit(candidate: worker | student): void {  &#39;education&#39; in candidate &amp;&amp;    console.log(`your education is ${candidate.education}`);  &#39;seniority&#39; in candidate &amp;&amp;    console.log(`your seniority is ${candidate.seniority}`);}const a: student = { isStudent: true, education: 4 };const b: worker = { isStudent: false, seniority: 2 };Recruit(a);Recruit(b);</code></pre><ul><li>typeof</li><li>instanceof</li></ul><h3 id="接口interface"><a href="#接口interface" class="headerlink" title="接口interface"></a>接口interface</h3><p>先看一个接口的例子</p><pre><code class="tsx">interface person {  name: string;}function work(personObj:person) {  console.log(personObj.name);}let person1 = {name: &#39;Alan&#39;, age: 21};work(person1);let person2 = {age: 21};work(person2);</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200615180720618.png" alt="image-20200615180720618"></p><p>定义接口的关键字是<code>interface</code><br>这个例子需要传入work的参数必须是一个带有name(string)的对象，可以理解为我要招聘一个有名字的员工，没有名字的都不需要。当然我们的person1中还多了一个<code>age</code>属性，这并不会报错。可是当我们直接传递参数时是会出错的。</p><pre><code class="js">work({name: &#39;Alan&#39;, age: 21});</code></pre><p>那如果我不确定要招聘的员工除了有姓名外还需要其他什么属性时，可以像下面一样重新定义接口就可以解决上面的问题了。</p><pre><code class="tsx">interface person {  name: string;  [propName: string]: any}</code></pre><h4 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h4><p>那如果我的招聘条件是最好懂typescript的，这个时候typescript就是可有可无的（最好懂，嘿嘿😜），那我们就要用到<strong>可选属性</strong>了<br><code>可选属性</code>在可选属性名后面加上一个<code>?</code></p><pre><code class="tsx">interface person {  name: string;  ts?: boolean;}function Recruit(personObj:person) : string{  if(personObj.ts) {    return `congratulations!${personObj.name}`;  } else {    return `sorry,${personObj.name}, we need a employee who know ts!`;  }}let person1 = {name: &#39;Alan&#39;, age: 21, ts: true};console.log(Recruit(person1));let person2 = {name: &#39;Bob&#39;, age: 21};console.log(Recruit(person2));</code></pre><h4 id="只读属性"><a href="#只读属性" class="headerlink" title="只读属性"></a>只读属性</h4><p>我们都知道人的名字都是不可以改变的（一般情况下），这个时候我们对person接口里面的name属性稍作修改，在属性名name前加上<code>readonly</code>。</p><div class="note info"><p>当然也可以使用setter/getter来实现</p></div><pre><code class="tsx">interface person {  readonly name: string;  ts?: boolean;}let person1: person = {name: &#39;Alan&#39;};person1.name = &#39;Bob&#39;; // Cannot assign to &#39;name&#39; because it is a read-only property.</code></pre><p><strong>我们发现readonly和const的作用好像有点相似，那我们什么时候使用readonly什么时候使用const呢？</strong><br>变量—-&gt;const<br>属性—-&gt;readonly</p><h4 id="函数类型的接口"><a href="#函数类型的接口" class="headerlink" title="函数类型的接口"></a>函数类型的接口</h4><p>接口除了可以描述带有属性的对象外，还可以描述函数类型<br>这里创建一个函数来检查你有没有打卡😁</p><pre><code class="tsx">interface attendanceFunc {  (name:string, startTime: number, endTime: number) : boolean;}let checkAttendance : attendanceFunc;checkAttendance = function (name:string, startTime: number, endTime: number) : boolean {  let result = startTime &lt; 9 &amp;&amp; endTime &gt;18;  return result;}console.log(checkAttendance(&#39;Alan&#39;, 10, 19)); // false</code></pre><p>看一下接口的声明：</p><pre><code class="tsx">interface attendanceFunc {  (name:string, startTime: number, endTime: number) : boolean;}</code></pre><p><code>name,startTime,endTime</code>放在<code>()</code>中代表函数的参数<br><code>:boolean</code>表示函数的返回值类型<br>当然上面例子中的<code>checkAttendance</code>的形参以及函数的返回值来说可以不指定类型，因为<code>checkAttendance</code>复制给了<code>attendanceFunc</code>变量，类型检查器会自动(按照接口中参数的顺序)推断出参数以及返回值的类型，也就是说写成下面这样也是可以的。<strong>函数中的参数名可以不和接口中的相同</strong></p><pre><code class="tsx">interface attendanceFunc {  (name:string, startTime: number, endTime: number) : boolean;}let checkAttendance : attendanceFunc;checkAttendance = function (n, startTime, endTime) {  let result = startTime &lt; 9 &amp;&amp; endTime &gt;18;  return result;}console.log(checkAttendance(&#39;Alan&#39;, 10, 19)); // false</code></pre><h4 id="接口的继承"><a href="#接口的继承" class="headerlink" title="接口的继承"></a>接口的继承</h4><p>一个接口可以继承1个或者多个接口：<br>继承使用关键词<code>extends</code></p><pre><code class="tsx">interface person {  name : string;}interface student {  studentId : number;}interface seniorStudent extends person, student {  grade: string;}let student1 : seniorStudent = {name: &#39;Alan&#39;, studentId: 1, grade: &#39;one&#39;};console.log(student1);</code></pre><h3 id="类class"><a href="#类class" class="headerlink" title="类class"></a>类class</h3><p>TS中的类和ES6中的类很相似，这里只介绍不同的地方</p><h4 id="变量修饰符"><a href="#变量修饰符" class="headerlink" title="变量修饰符"></a>变量修饰符</h4><ul><li>public（默认）</li><li>private（私有，不能在声明它的类的外部访问）</li><li>protected（和private类似，不同的是protected声明的变量可以在派生类（即子类）中访问）</li></ul><h4 id="静态属性static"><a href="#静态属性static" class="headerlink" title="静态属性static"></a>静态属性static</h4><pre><code class="tsx">class Person {  static fingerNum = 5;}// 只能通过类来访问console.log(Person.fingerNum);// 不能通过实例访问console.log(new Person().fingerNum);</code></pre><pre><code class="tsx">// 单例模式创建唯一的实例class singleClass {  private static instance: singleClass;  private constructor(public name: string) {}  static getInstance() {    if (!this.instance) {      this.instance = new singleClass(&#39;Alan&#39;);    }    return this.instance;  }}const class1 = singleClass.getInstance();const class2 = singleClass.getInstance();console.log(class1.name); // Alanconsole.log(class1 === class2); // true</code></pre><h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><pre><code class="tsx">class Person {  constructor(name, mobile, sex) {    this.name = name;    this.mobile = mobile;    this.sex = sex;  }  public name: string;  private mobile: string;  protected sex: string;}</code></pre><p>上面的代码可以简写成下面这样</p><pre><code class="tsx">class Person {  constructor(name: string, private mobile: string, protected sex: string) {  }}</code></pre><h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><ul><li>不能被实例化</li><li>要使用的话要声明其派生类，并且重写其中的抽象方法</li></ul><pre><code class="tsx">abstract class Animal {  constructor(public name: string) {}  sayHello() {    console.log(&#39;hello&#39;);  }  // 声明抽象方法  abstract action(): void;}class Bird extends Animal{  constructor(name) {    super(name);  }  action() {    console.log(&#39;jijiji&#39;);  }}const bird = new Bird(&#39;qc&#39;);console.log(bird);// Bird { name: &#39;qc&#39; }</code></pre><h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><blockquote><p>泛型（Generics）是指在定义函数、接口或类的时候，<strong>不预先指定</strong>具体的类型，而在<strong>使用的时候</strong>再指定类型的一种特性。</p></blockquote><p>用法：&lt;泛型名&gt;</p><pre><code class="tsx">function Recruit&lt;T&gt;(name: string, props: T) {  return name + props;}// 显式指定为T为number类型console.log(Recruit&lt;number&gt;(&#39;Alan&#39;, 123)); // Alan123// TS自动推断为number类型，和上面效果一样console.log(Recruit(&#39;Alan&#39;, 123)); // Alan123console.log(Recruit(&#39;Alan&#39;, [1, 2, 3])); // Alan1,2,3</code></pre><h4 id="泛型约束"><a href="#泛型约束" class="headerlink" title="泛型约束"></a>泛型约束</h4><p>试用extends约束泛型</p><pre><code class="tsx">interface info {  mobile: string;}// T泛型必须满足infofunction Recruit&lt;T extends info&gt;(name: string, props: T) {  return name + props.mobile;}console.log(Recruit(&#39;Alan&#39;, { mobile: &#39;1232910830&#39; })); // Alan1232910830</code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0进阶（三）</title>
      <link href="/posts/f9d92613/"/>
      <url>/posts/f9d92613/</url>
      
        <content type="html"><![CDATA[<p>手写简单的loader、Plugin、简单的webpack</p><a id="more"></a><h3 id="手写简单的loader"><a href="#手写简单的loader" class="headerlink" title="手写简单的loader"></a>手写简单的loader</h3><p>目录</p><pre><code>myLoader ├── loaders │   └── myLoader.js ├── package.json ├── src │   └── index.js └── webpack.config.js</code></pre><div class="tabs" id="1"><ul class="nav-tabs"><li class="tab active"><a class="#1-1">index.js</a></li><li class="tab"><a class="#1-2">webpack.config.js</a></li><li class="tab"><a class="#1-3">myLoader.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="1-1"><pre><code class="js"><span class="built_in">console</span>.log(<span class="string">'hello webpack!'</span>);</code></pre></div><div class="tab-pane" id="1-2"><pre><code class="js"><span class="keyword">const</span> path =<span class="built_in">require</span>(<span class="string">'path'</span>);<span class="built_in">module</span>.exports = {  mode: <span class="string">'development'</span>,  entry: <span class="string">'./src/index.js'</span>,  <span class="built_in">module</span>: {    rules: [{      test: <span class="regexp">/\.js$/</span>,      exclude: <span class="regexp">/node_modules/</span>,      use: [        {          loader: path.resolve(__dirname, <span class="string">'./loaders/myLoader.js'</span>),          options: {            key: <span class="string">'my option value'</span>,          },        },      ],    }],  },  output: {    path: path.resolve(__dirname, <span class="string">'dist'</span>),    filename: <span class="string">'[name].js'</span>,  },};</code></pre></div><div class="tab-pane" id="1-3"><pre><code class="js"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">source</span>) </span>{  <span class="keyword">return</span> source.replace(<span class="string">'webpack'</span>, <span class="keyword">this</span>.query.key);}</code></pre></div></div></div><p>这个例子非常简单，就是通过自建的loader将项目中的<strong>webpack</strong>字符串替换成webpack中配置的字符串。<code>myLoader.js</code>中可以通过<code>this.query</code>接受webpack中配置的options参数。更多this上的<a href="https://webpack.js.org/api/loaders/#the-loader-context" target="_blank" rel="noopener">属性参考</a>（包括异步处理、回调…）</p><p>上面的例子通过打包后代码如下</p><pre><code class="js">console.log(&#39;hello my option value!&#39;)</code></pre><p><strong>webpack5</strong>中可以直接通过<code>this.getOptions (schema)</code>来获取options参数</p><p><strong>webpack resolveLoader:</strong></p><p>和之前提到的resolve的使用类似，就是用来偷懒的😂</p><p>使用<code>resolveLoader</code>改写后的wepack.config.js</p><pre><code class="js">const path =require(&#39;path&#39;);module.exports = {  mode: &#39;development&#39;,  entry: &#39;./src/index.js&#39;,  resolveLoader: {    modules: [&#39;node_modules&#39;, &#39;./loaders&#39;],  },  module: {    rules: [{      test: /\.js$/,      exclude: /node_modules/,      use: [        {          loader: &#39;myLoader&#39;,          options: {            key: &#39;my option&#39;,          },        },      ],    }],  },  output: {    path: path.resolve(__dirname, &#39;dist&#39;),    filename: &#39;[name].js&#39;,  },};</code></pre><p>上面这个例子可以直接使用<code>myLoader</code>名，webpack会在<code>node_modules</code> 和<code>./loaders</code>中寻找对应的Loader。</p><div class="note warning"><p>自定义的loader中不要使用箭头函数，会产生this指向问题</p></div><h3 id="手写简单的Plugin"><a href="#手写简单的Plugin" class="headerlink" title="手写简单的Plugin"></a>手写简单的Plugin</h3><p>目录</p><pre><code>myPlugin ├── package.json ├── plugins │   └── date-webpack-plugin.js ├── src │   └── index.js └── webpack.config.js</code></pre><p><a href="https://webpack.js.org/api/compiler-hooks/" target="_blank" rel="noopener">complier提供了许多钩子</a>，可以让我们在打包的不同时刻来进行不同的处理，这里使用了<code>emit</code>钩子</p><p>下面通过手写的plugin来实现在dist目录下生成一个<code>author.txt</code>文件</p><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">date-webpack-plugin.js</a></li><li class="tab"><a class="#2-2">webpack.config.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="js"><span class="class"><span class="keyword">class</span> <span class="title">DateWebpackPlugin</span> </span>{  <span class="keyword">constructor</span>(options) {    <span class="comment">// options是new插件时传进来的参数</span>    <span class="keyword">this</span>.options = options;  }  apply(compiler) {    <span class="keyword">const</span> _this = <span class="keyword">this</span>;    compiler.hooks.emit.tapAsync(<span class="string">'DateWebpackPlugin'</span>, (compilation, cb) =&gt; {      compilation.assets[<span class="string">'author.txt'</span>] = {        <span class="comment">// 返回的资源</span>        source: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{          <span class="keyword">return</span> <span class="string">`created by <span class="subst">${_this.options.author}</span> <span class="subst">${<span class="keyword">new</span> <span class="built_in">Date</span>()}</span>`</span>;        },        <span class="comment">// 最后生成的文件大小</span>        size: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{          <span class="keyword">return</span> <span class="number">19</span>;        }      };      <span class="comment">// 由于emit是异步操作，所以最后要执行回调函数</span>      cb();    })  }}<span class="built_in">module</span>.exports = DateWebpackPlugin;</code></pre></div><div class="tab-pane" id="2-2"><pre><code class="js"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);<span class="keyword">const</span> DateWebpackPlugin = <span class="built_in">require</span>(<span class="string">'./plugins/date-webpack-plugin'</span>);<span class="built_in">module</span>.exports = {  mode: <span class="string">'development'</span>,  entry: <span class="string">'./src/index.js'</span>,  output: {    path: path.resolve(__dirname, <span class="string">'dist'</span>),    filename: <span class="string">'[name].js'</span>,  },  plugins: [    <span class="keyword">new</span> DateWebpackPlugin({      author: <span class="string">'Alan'</span>,    }),  ],};</code></pre></div></div></div><p>打包后会在dist目录下自动生成一个author.txt文件，内容如下</p><pre><code>created by AlanSun Jun 07 2020 11:49:42 GMT+0800 (GMT+08:00)</code></pre><h3 id="react和vue脚手架webpack配置"><a href="#react和vue脚手架webpack配置" class="headerlink" title="react和vue脚手架webpack配置"></a>react和vue脚手架webpack配置</h3><ul><li>create-react-app通过<code>npm run eject</code>暴露webpack配置</li><li>vue-cli通过<a href="https://cli.vuejs.org/zh/config/#vue-config-js" target="_blank" rel="noopener">vue.config.js</a>配置webpack(可以通过configureWebpack自定义webpack配置)</li></ul><h3 id="手写一个简单的webpack打包工具"><a href="#手写一个简单的webpack打包工具" class="headerlink" title="手写一个简单的webpack打包工具"></a>手写一个简单的webpack打包工具</h3><p>先提前安装以下需要的插件</p><pre><code>npm i @babel/parser -D // 将js内容转化为抽象语法树npm i @babel/traverse -D // 用来遍历抽象语法树npm i @babel/core -Dnpm i @babel/preset-env -D //es6-&gt;es5npm i cli-highlight -D // 可选，命令行高亮插件</code></pre><p>前置知识：</p><p><strong>node：</strong></p><ul><li><a href="http://nodejs.cn/api/fs.html#fs_fs_readfilesync_path_options" target="_blank" rel="noopener">fs.readFileSync</a>(同步读取文件内容)</li><li><a href="http://nodejs.cn/api/path.html#path_path_dirname_path" target="_blank" rel="noopener">path_dirname</a>(获取文件的目录)</li></ul><p><strong>项目目录：</strong></p><pre><code>bundler ├── bundler.js  // 主要文件 └── src     ├── course.js     ├── index.js     └── learn.js</code></pre><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">index.js</a></li><li class="tab"><a class="#3-2">learn.js</a></li><li class="tab"><a class="#3-3">course.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js"><span class="keyword">import</span> notify <span class="keyword">from</span> <span class="string">'./learn.js'</span>;<span class="built_in">console</span>.log(notify);</code></pre></div><div class="tab-pane" id="3-2"><pre><code class="js"><span class="keyword">import</span> { course } <span class="keyword">from</span> <span class="string">'./course.js'</span>;<span class="keyword">const</span> learnNotify = <span class="string">`time to learn <span class="subst">${course}</span>`</span>;<span class="keyword">export</span> <span class="keyword">default</span> learnNotify;</code></pre></div><div class="tab-pane" id="3-3"><pre><code class="js"><span class="keyword">export</span> <span class="keyword">const</span> course = <span class="string">'webpack'</span>;</code></pre></div></div></div><p>我将整个项目拆分成2个部分来分析</p><h4 id="处理入口文件找到所有import文件"><a href="#处理入口文件找到所有import文件" class="headerlink" title="处理入口文件找到所有import文件"></a>处理入口文件找到所有import文件</h4><p>思路：</p><ol><li>通过fs.readFileSync读取index.js的内容</li><li>使用@babel/parser将读取的内容转化为AST抽象语法树</li><li>使用@babel/traverse遍历找到所有import语句</li><li>分析出引用的文件，保存其路径</li></ol><p>代码：</p><pre><code class="js">const fs = require(&#39;fs&#39;);const parser = require(&#39;@babel/parser&#39;);const traverse = require(&#39;@babel/traverse&#39;).default;// 命令行高亮工具const highlight = require(&#39;cli-highlight&#39;).highlightconst moduleAnalysis = (filename) =&gt; {  // 读取出index.js文件内容  const content = fs.readFileSync(filename, &#39;utf-8&#39;);  // 将文件内容转化为抽象语法树  const ast = parser.parse(content, {    sourceType: &#39;module&#39;  });  // 遍历抽象语法树  traverse(ast, {    ImportDeclaration({ node }) {      console.log(node);    }  })  // console.log(highlight(ast));  console.log(ast.program.body);}moduleAnalysis(&#39;./src/index.js&#39;);</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200612111622662.png" alt="通过parser转化成的抽象语法树"></p><p>通过上图可以清楚看到我们现在要做的事情就是找到所有为type为<code>importDeclaration</code>的node属性</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200612112106327.png" alt="使用traverse得到的ImportDeclaration"></p><p>最后对js文件进行babel处理，转化成浏览器能够识别的代码</p><p>完整代码</p><pre><code class="js">const fs = require(&#39;fs&#39;);const parser = require(&#39;@babel/parser&#39;);const traverse = require(&#39;@babel/traverse&#39;).default;const path = require(&#39;path&#39;);const babel = require(&#39;@babel/core&#39;);// 命令行高亮工具const highlight = require(&#39;cli-highlight&#39;).highlightconst moduleAnalysis = (filename) =&gt; {  // 读取出index.js文件内容  const content = fs.readFileSync(filename, &#39;utf-8&#39;);  // 将文件内容转化为抽象语法树  const ast = parser.parse(content, {    sourceType: &#39;module&#39;  });  const dependencies = {};  // 遍历抽象语法树  traverse(ast, {    ImportDeclaration({ node }) {      // 文件对应目录./src      const dirPath = path.dirname(filename);      // 绝对路径./src/learn.js(window操作系统)      let filePath = (&#39;./&#39; + path.join(dirPath, node.source.value)).replace(&#39;\\&#39;, &#39;/&#39;);      dependencies[node.source.value] = filePath;      // { &#39;./learn.js&#39;: &#39;./src/learn.js&#39; }      console.log(dependencies);    }  });  // 转化成浏览器可以执行的代码  const { code } = babel.transformFromAst(ast, null, {    presets: [&#39;@babel/preset-env&#39;]  });  console.log(highlight(code));  return {    filename,    dependencies,    code  }}moduleAnalysis(&#39;./src/index.js&#39;);</code></pre><h4 id="通过入口文件分析出所有文件依赖"><a href="#通过入口文件分析出所有文件依赖" class="headerlink" title="通过入口文件分析出所有文件依赖"></a>通过入口文件分析出所有文件依赖</h4><p>上面已经分析出了入口文件的一些依赖，接下来可以通过递归遍历来分析出所有的文件依赖并保存在变量中，先分析一些经过上面函数处理后的数据</p><pre><code class="json">{  filename: &#39;./src/index.js&#39;,  dependencies: { &#39;./learn.js&#39;: &#39;./src/learn.js&#39; },  code: &#39;&quot;use strict&quot;;\n&#39; +    &#39;\n&#39; +    &#39;var _learn = _interopRequireDefault(require(&quot;./learn.js&quot;));\n&#39; +    &#39;\n&#39; +    &#39;function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { &quot;default&quot;: obj }; }\n&#39; +    &#39;\n&#39; +    &#39;console.log(_learn[&quot;default&quot;]);&#39;}</code></pre><p>我们只需要遍历对象中的dependencies属性，把里面的路径名传入到上面的<code>moduleAnalysis</code>函数中，最终获取所有的依赖信息。</p><p>具体代码如下</p><pre><code class="js">const analysisDependenciesGraph = (entry) =&gt; {  const entryModule = moduleAnalysis(entry);  const graphList = [entryModule];  for (let i = 0; i &lt; graphList.length; i++) {    const item = graphList[i];    const { dependencies } = item;    if (dependencies) {      for (let i in dependencies) {        graphList.push(moduleAnalysis(dependencies[i]))      }    }  }  const graph = {};  graphList.forEach(({ filename, dependencies, code }) =&gt; {    graph[filename] = {      dependencies,      code    }  });  return graph;}</code></pre><p>分析出的所有依赖对象</p><pre><code class="json">{  &#39;./src/index.js&#39;: {    dependencies: { &#39;./learn.js&#39;: &#39;./src/learn.js&#39; },    code: &#39;&quot;use strict&quot;;\n&#39; +      &#39;\n&#39; +      &#39;var _learn = _interopRequireDefault(require(&quot;./learn.js&quot;));\n&#39; +      &#39;\n&#39; +      &#39;function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { &quot;default&quot;: obj }; }\n&#39; +      &#39;\n&#39; +      &#39;console.log(_learn[&quot;default&quot;]);&#39;  },  &#39;./src/learn.js&#39;: {    dependencies: { &#39;./course.js&#39;: &#39;./src/course.js&#39; },    code: &#39;&quot;use strict&quot;;\n&#39; +      &#39;\n&#39; +      &#39;Object.defineProperty(exports, &quot;__esModule&quot;, {\n&#39; +      &#39;  value: true\n&#39; +      &#39;});\n&#39; +      &#39;exports[&quot;default&quot;] = void 0;\n&#39; +      &#39;\n&#39; +      &#39;var _course = require(&quot;./course.js&quot;);\n&#39; +      &#39;\n&#39; +      &#39;var learnNotify = &quot;time to learn &quot;.concat(_course.course);\n&#39; +      &#39;var _default = learnNotify;\n&#39; +      &#39;exports[&quot;default&quot;] = _default;&#39;  },  &#39;./src/course.js&#39;: {    dependencies: {},    code: &#39;&quot;use strict&quot;;\n&#39; +      &#39;\n&#39; +      &#39;Object.defineProperty(exports, &quot;__esModule&quot;, {\n&#39; +      &#39;  value: true\n&#39; +      &#39;});\n&#39; +      &#39;exports.course = void 0;\n&#39; +      &quot;var course = &#39;webpack&#39;;\n&quot; +      &#39;exports.course = course;&#39;  }}</code></pre><h4 id="生成代码"><a href="#生成代码" class="headerlink" title="生成代码"></a>生成代码</h4><pre><code class="js">const generateCode = (entry) =&gt; {    const graph = JSON.stringify(analysisDependenciesGraph(entry));    return `        (function(graph){            function require(module) {                 function localRequire(relativePath) {                    return require(graph[module].dependencies[relativePath]);                }                var exports = {};                (function(require, exports, code){                    eval(code)                })(localRequire, exports, graph[module].code);                return exports;            };            require(&#39;${entry}&#39;)        })(${graph});    `;}</code></pre><p>生成后的代码就可以直接在浏览器运行了</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200613160248899.png" alt="image-20200613160248899"></p><p>完整代码</p><pre><code class="js">const fs = require(&#39;fs&#39;);const parser = require(&#39;@babel/parser&#39;);const traverse = require(&#39;@babel/traverse&#39;).default;const path = require(&#39;path&#39;);const babel = require(&#39;@babel/core&#39;);// 命令行高亮工具const highlight = require(&#39;cli-highlight&#39;).highlightconst moduleAnalysis = (filename) =&gt; {  // 读取出index.js文件内容  const content = fs.readFileSync(filename, &#39;utf-8&#39;);  // 将文件内容转化为抽象语法树  const ast = parser.parse(content, {    sourceType: &#39;module&#39;  });  const dependencies = {};  // 遍历抽象语法树  traverse(ast, {    ImportDeclaration({ node }) {      // 文件对应目录./src      const dirPath = path.dirname(filename);      // 绝对路径./src/learn.js(window操作系统)      let filePath = (&#39;./&#39; + path.join(dirPath, node.source.value)).replace(&#39;\\&#39;, &#39;/&#39;);      dependencies[node.source.value] = filePath;      // { &#39;./learn.js&#39;: &#39;./src/learn.js&#39; }      console.log(dependencies);    }  });  // 转化成浏览器可以执行的代码  const { code } = babel.transformFromAst(ast, null, {    presets: [&#39;@babel/preset-env&#39;]  });  return {    filename,    dependencies,    code  }}const analysisDependenciesGraph = (entry) =&gt; {  const entryModule = moduleAnalysis(entry);  const graphList = [entryModule];  for (let i = 0; i &lt; graphList.length; i++) {    const item = graphList[i];    const { dependencies } = item;    if (dependencies) {      for (let j in dependencies) {        graphList.push(moduleAnalysis(dependencies[j]))      }    }  }  const graph = {};  graphList.forEach(({ filename, dependencies, code }) =&gt; {    graph[filename] = {      dependencies,      code    }  });  return graph;}const generateCode = (entry) =&gt; {    const graph = JSON.stringify(analysisDependenciesGraph(entry));    return `        (function(graph){            function require(module) {                 function localRequire(relativePath) {                    return require(graph[module].dependencies[relativePath]);                }                var exports = {};                (function(require, exports, code){                    eval(code)                })(localRequire, exports, graph[module].code);                return exports;            };            require(&#39;${entry}&#39;)        })(${graph});    `;}const code = generateCode(&#39;./src/index.js&#39;);console.log(highlight(code));</code></pre><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>到这里总算是对webpack有了大体的了解了。奈何当我学完webpack后看到了<strong>vite</strong>这个东西😒。。。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200615160241265.png" alt="image-20200615160241265"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0进阶（二）</title>
      <link href="/posts/b4c78541/"/>
      <url>/posts/b4c78541/</url>
      
        <content type="html"><![CDATA[<p>TS、Eslint、webpack性能优化</p><a id="more"></a><h2 id="基础内容"><a href="#基础内容" class="headerlink" title="基础内容"></a>基础内容</h2><h3 id="打包TS文件"><a href="#打包TS文件" class="headerlink" title="打包TS文件"></a>打包TS文件</h3><p>使用ts-loader</p><pre><code>npm i ts-loader typescript -D</code></pre><p>项目目录如下：</p><pre><code>ts-test ├── dist │   └── main.js ├── package.json ├── src │   └── index.tsx ├── tsconfig.json └── webpack.config.js</code></pre><p><code>tsconfig.json</code>为TS的配置文件，更多配置<a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener">查看</a></p><p>index.tsx</p><pre><code class="tsx">interface person {  name: string;  ts?: boolean;}function Recruit(personObj:person) : string{  if(personObj.ts) {    return `congratulations!${personObj.name}`;  } else {    return `sorry,${personObj.name}, we need a employee who know ts!`;  }}let person1 = {name: &#39;Alan&#39;, age: 21, ts: true};console.log(Recruit(person1));let person2 = {name: &#39;Bob&#39;, age: 21};console.log(Recruit(person2));</code></pre><p>tsconfig.json</p><pre><code class="json">{  &quot;compilerOptions&quot;: {    &quot;outDir&quot;: &quot;./dist/&quot;, // 由于webpack中配置了，这里可配可不配    &quot;module&quot;: &quot;es6&quot;,    &quot;target&quot;: &quot;es5&quot;,    &quot;allowJs&quot;: true  }}</code></pre><p>webpack.config.js</p><pre><code class="js">const path = require(&#39;path&#39;);module.exports = {  mode: &#39;production&#39;,  entry: &#39;./src/index.tsx&#39;,  module: {    rules: [      {        test: /\.tsx?$/,        exclude: /node_modules/,        use: &#39;ts-loader&#39;,      }    ]  },  output: {    filename: &#39;[name].js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;)  }}</code></pre><p><strong>当我们项目安装了三方库时并且要在ts文件中使用，得安装该三方库的<code>definitions</code>，具体库可以在<a href="https://microsoft.github.io/TypeSearch/" target="_blank" rel="noopener">TypeSearch</a>查找</strong></p><h3 id="devServer-historyApiFallback"><a href="#devServer-historyApiFallback" class="headerlink" title="devServer.historyApiFallback"></a>devServer.historyApiFallback</h3><p>开发环境下使用单页应用需要配置<code>devServer.historyApiFallback： true</code></p><h3 id="Eslint"><a href="#Eslint" class="headerlink" title="Eslint"></a>Eslint</h3><p>Eslint是用来统一代码风格的，在团队协作时能够保证每个人书写出的代码风格都是统一的，有利于代码的维护。</p><p>使用方式：</p><pre><code>npm i eslint -D</code></pre><p>初始化配置</p><pre><code>npx eslint --init</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200603151418086.png" alt="image-20200603151418086"></p><p>初始化配置后我们就可以使用了，这里我安装的是airbnb标准。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200603151832567.png" alt="image-20200603151832567"></p><p>上面图片中eslint提示jsx语法不能在js文件中使用，这。。。。😰。那我就是要使用怎么办，可以在生成的<code>.eslintrc.js</code>文件中配置rules忽略这一标准。</p><pre><code class="js">rules: {    &#39;react/jsx-filename-extension&#39;: 0,},</code></pre><p>由于团队协作很难确保每个人的开发环境都是一样的，于是我们可以把eslint和webpack结合起来，使用一个loader在每次打包时对代码进行eslint检查，但是这样可能会影响打包速度，使用时要对速度和代码质量进行取舍。这里介绍一下使用到的eslint-loader</p><pre><code>npm i eslint-loader -D</code></pre><p>webpack.common.js配置</p><pre><code class="js">rules: [    {        test: /\.js$/,        exclude: /node_modules/, // 不对node_modules下的js文件处理        use: [&#39;babel-loader&#39;, &#39;eslint-loader&#39;],    },],</code></pre><p>当然也可以设置<code>devServer.overlay: true</code>来实现错误实时显示在浏览器上，方便调试。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200603153518433.png" alt="image-20200603153518433"></p><h3 id="多页应用打包"><a href="#多页应用打包" class="headerlink" title="多页应用打包"></a>多页应用打包</h3><p>需要设置多个entry，打包后生成多个.html文件。</p><pre><code>src ├── index.html ├── index.js └── list.js</code></pre><pre><code class="js">// webpack的entry和plugins的配置entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件    list: &#39;./src/list.js&#39;,},plugins: [    new HtmlWebpackPlugin({      template: &#39;./src/index.html&#39;,      filename: &#39;index.html&#39;,      chunks: [&#39;main&#39;],    }),    new HtmlWebpackPlugin({      template: &#39;./src/index.html&#39;,      filename: &#39;list.html&#39;,      chunks: [&#39;list&#39;],    }),    new CleanWebpackPlugin(),],      </code></pre><p>打包后生成的目录</p><pre><code>dist ├── index.html ├── list.8c4e5ed5eb6302c4c5ef.js ├── list.8c4e5ed5eb6302c4c5ef.js.map ├── list.html ├── main.acc2939e4489e5d76660.js ├── main.acc2939e4489e5d76660.js.map ├── vendors~list~main.2d42972bf2bf50e6d3cd.js └── vendors~list~main.2d42972bf2bf50e6d3cd.js.map</code></pre><p><strong>现在只有两个页面还好说，但是当页面一多我们就要配置多个HtmlWebpackPlugin。那如何让它自动配置呢，这里封装一个函数处理一下就好了</strong></p><pre><code class="js">const generateHtmlPlugin = (entry) =&gt; {  const plugins = [    new CleanWebpackPlugin(),    new webpack.ProvidePlugin({      _: &#39;lodash&#39;,    }),  ];  Object.keys(entry).forEach((item) =&gt; {    plugins.push(      new HtmlWebpackPlugin({        template: &#39;./src/index.html&#39;,        filename: `${item}.html`,        chunks: [item],      }),    );  });  return plugins;};</code></pre><p>webpack完整配置（webpack.common.js）</p><pre><code class="js">const path = require(&#39;path&#39;);const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);const { CleanWebpackPlugin } = require(&#39;clean-webpack-plugin&#39;);const webpack = require(&#39;webpack&#39;);const generateHtmlPlugin = (entry) =&gt; {  const plugins = [    new CleanWebpackPlugin(),    new webpack.ProvidePlugin({      _: &#39;lodash&#39;,    }),  ];  Object.keys(entry).forEach((item) =&gt; {    plugins.push(      new HtmlWebpackPlugin({        template: &#39;./src/index.html&#39;,        filename: `${item}.html`,        chunks: [item],      }),    );  });  return plugins;};const configs = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件    list: &#39;./src/list.js&#39;,  },  module: {    rules: [      {        test: /\.js$/,        exclude: /node_modules/, // 不对node_modules下的js文件处理        use: [&#39;babel-loader&#39;],      },    ],  },  optimization: {    usedExports: true,    splitChunks: {      chunks: &#39;all&#39;,    },  },  output: {    path: path.resolve(__dirname, &#39;dist&#39;),  },};configs.plugins = generateHtmlPlugin(configs.entry);module.exports = configs;</code></pre><h2 id="webpack性能优化"><a href="#webpack性能优化" class="headerlink" title="webpack性能优化"></a>webpack性能优化</h2><h3 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h3><ul><li>减少使用不必要的Loader</li><li>合理使用exclude和include来针对性的使用loader</li></ul><h3 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h3><ul><li>减少不必要的plugin的使用</li></ul><h3 id="Resolve（偷懒用的？😂）"><a href="#Resolve（偷懒用的？😂）" class="headerlink" title="Resolve（偷懒用的？😂）"></a>Resolve（偷懒用的？😂）</h3><ul><li>减少extensions的使用</li><li>减少mainFiles的使用</li><li>减少alias的使用</li></ul><p><strong>extensions的使用</strong></p><p>配置了extensions后可以不写扩展名🤣</p><p>目录文件</p><pre><code>webpacktest ├── package.json ├── src │   ├── index.html │   ├── index.js │   └── tool │       └── tool.jsx ├── webpack.common.js ├── webpack.dev.js └── webpack.prod.js</code></pre><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">webpack.config.js</a></li><li class="tab"><a class="#2-2">index.js</a></li><li class="tab"><a class="#2-3">tool.jsx</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="js">resolve: {    extensions: [<span class="string">'.js'</span>, <span class="string">'.jsx'</span>], },</code></pre></div><div class="tab-pane" id="2-2"><pre><code class="js"><span class="keyword">import</span> tool <span class="keyword">from</span> <span class="string">'./tool/tool'</span>;tool();</code></pre></div><div class="tab-pane" id="2-3"><pre><code class="jsx"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Tool</span>(<span class="params"></span>) </span>{  <span class="built_in">console</span>.log(<span class="string">'my tool'</span>);}</code></pre></div></div></div> <p>设置了<code>extensions</code>后，webpack由于找不到<code>./tool/tool</code>会先去寻找<code>./tool/tool.js</code>，如果没找到再去寻找<code>./tool/tool.jsx</code>。</p><p><strong>mainFiles的使用</strong></p><p>配置了mainFiles后可以不写默认文件（说白了就是偷懒😎）</p><p>修改index.js文件</p><pre><code class="js">import tool from &#39;./tool/&#39;;tool();</code></pre><p>webpack配置</p><pre><code class="js">resolve: {    extensions: [&#39;.js&#39;, &#39;.jsx&#39;],    mainFiles: [&#39;index&#39;, &#39;tool&#39;],},</code></pre><p>设置了<code>mainFiles</code>后，webpack会先去寻找<code>./tool/index.js</code>和<code>./tool/index.jsx</code> ，如果没找到再去寻找<code>./tool/tool.js</code>和<code>./tool/tool.jsx</code>。</p><p><strong>alias的使用</strong></p><p>偷懒神器，免去写长长的路径。</p><p>修改index.js文件</p><pre><code class="js">import tool from &#39;myTool&#39;; //这里使用的是别名aliastool();</code></pre><p>webpack配置</p><pre><code class="js">resolve: {    extensions: [&#39;.js&#39;, &#39;.jsx&#39;],    mainFiles: [&#39;index&#39;, &#39;tool&#39;],    alias: {        myTool: path.resolve(__dirname, &#39;./src/tool/tool.jsx&#39;),    },},</code></pre><p>这样就可以使用别名myTool来直接引用tool.jsx文件了。</p><h3 id="DllPlugin"><a href="#DllPlugin" class="headerlink" title="DllPlugin"></a>DllPlugin</h3><p>优化项目中第三方模块的打包速度</p><h3 id="多进程打包"><a href="#多进程打包" class="headerlink" title="多进程打包"></a>多进程打包</h3><p>多进程打包插件有：thread-loader，parallel-webpack，happypack</p><h3 id="sourceMap"><a href="#sourceMap" class="headerlink" title="sourceMap"></a>sourceMap</h3><p>根据不同环境来配置不同的sourceMap最大程度上优化打包速度</p><h3 id="status-json"><a href="#status-json" class="headerlink" title="status.json"></a>status.json</h3><p>通过status.json文件来分析打包过程，找到最影响性能的地方对症下药。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端面试题</title>
      <link href="/posts/20802113/"/>
      <url>/posts/20802113/</url>
      
        <content type="html"><![CDATA[<p>记录了自己疫情期间自学+复习总结的一些面试题+面试遇到的一些问题，文章将会持续更新。</p><a id="more"></a><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="http://img.adoutu.com/picture/1538925790667.jpg" alt=""></p><p>由于今年疫情的原因以及一些个人原因，辞去了之前的实习工作。在家待了也快5个月了(期间经历了毕业设计+毕业答辩（2个月），算下来已经有3个月没有上班了😭)。去年在公司实习错过了秋招，今年又碰上疫情，对我这个应届生来说简直是难上加难。在家这段时间自己学习了React、webpack。用React搭建了一直想做但是耽搁了半年的博客，搭建出来后考虑后期维护成本（服务器费用），就没有继续维护了。改用了Hexo+github搭建了一个静态博客。真香😂。</p><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><h3 id="原型及继承"><a href="#原型及继承" class="headerlink" title="原型及继承"></a>原型及继承</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200724160959828.png" alt="红宝书中的图"></p><p><strong>组合继承</strong></p><pre><code class="js">function Person(name) {  this.name = name;  this.features = [&#39;eyes&#39;];}function Student(name, id) {  Person.call(this, name); //继承属性相当于super(this)  this.id = id;}Student.prototype = new Person();Student.prototype.sayHello = function () {  console.log(&#39;hello&#39;);};const s1 = new Student(&#39;Alan&#39;, &#39;001&#39;);const s2 = new Student(&#39;Bob&#39;, &#39;002&#39;);console.log(s1 instanceof Person); // true// 引用类型在各实例中不会相互影响s1.features.push(&#39;hand&#39;);console.log(s2.features); // [&quot;eyes&quot;]</code></pre><p>更多继承方式及其优缺点可以查看红宝书第六章（讲得非常“干”）</p><h3 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="headerlink" title="深拷贝和浅拷贝"></a>深拷贝和浅拷贝</h3><p>在JS中，变量分为了基本类型和引用类型。对基本类型进行赋值时是对值进行拷贝的，而对引用类型进行赋值则是对地址进行拷贝。</p><div class="tabs" id="1"><ul class="nav-tabs"><li class="tab active"><a class="#1-1">基本类型</a></li><li class="tab"><a class="#1-2">引用类型</a></li></ul><div class="tab-content"><div class="tab-pane active" id="1-1"><pre><code class="js"><span class="keyword">let</span> a = <span class="number">1</span>;<span class="keyword">let</span> b= a;<span class="built_in">console</span>.log(a); <span class="comment">// 1</span>a++;<span class="built_in">console</span>.log(a); <span class="comment">// 2</span><span class="built_in">console</span>.log(b); <span class="comment">// 1</span></code></pre></div><div class="tab-pane" id="1-2"><pre><code class="js"><span class="keyword">const</span> obj = {    name: <span class="string">'Alan'</span>,    age: <span class="number">22</span>,}<span class="keyword">const</span> cloneObj = obj;obj.age = <span class="number">18</span>;<span class="built_in">console</span>.log(cloneObj.age); <span class="comment">// 18</span></code></pre></div></div></div><p>通过上面的例子我们知道，cloneObj和obj是指向同一个地址的，任何一方修改都会影响到对方，那如何创建一个独立的cloneObj?，这就要使用深拷贝和浅拷贝了。</p><p>深拷贝和浅拷贝的区别：</p><p>根据拷贝的层级进行区分，浅拷贝只进行一层拷贝，深拷贝进行多层拷贝。</p><ul><li>浅拷贝</li></ul><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">方法1</a></li><li class="tab"><a class="#2-2">方法2</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="js"><span class="keyword">const</span> obj = {<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:{<span class="attr">b1</span>:<span class="number">1</span>, <span class="attr">b2</span>:<span class="number">2</span>}, <span class="attr">c</span>:<span class="number">0</span>};<span class="function"><span class="keyword">function</span> <span class="title">shallowClone</span>(<span class="params">source</span>) </span>{    <span class="keyword">const</span> result= {};    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> source) {        <span class="keyword">if</span> (source.hasOwnProperty(key)) {            result[key] = source[key];        }    }    <span class="keyword">return</span> result;}<span class="keyword">const</span> shallowObj = shallowClone(obj);obj.a = <span class="number">10</span>;<span class="built_in">console</span>.log(shallowObj.a); <span class="comment">// 1</span>obj.b.b1 = <span class="number">6</span>;<span class="built_in">console</span>.log(shallowObj.b.b1); <span class="comment">// 6</span></code></pre></div><div class="tab-pane" id="2-2"><pre><code class="js"><span class="keyword">const</span> obj = {<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:{<span class="attr">b1</span>:<span class="number">1</span>, <span class="attr">b2</span>:<span class="number">2</span>}, <span class="attr">c</span>:<span class="number">0</span>};<span class="function"><span class="keyword">function</span> <span class="title">shallowClone1</span>(<span class="params">source</span>) </span>{    <span class="keyword">return</span> <span class="built_in">Object</span>.assign({}, source);}<span class="keyword">const</span> shallowObj = shallowClone1(obj);obj.a = <span class="number">10</span>;<span class="built_in">console</span>.log(shallowObj.a); <span class="comment">// 1</span>obj.b.b1 = <span class="number">6</span>;<span class="built_in">console</span>.log(shallowObj.b.b1); <span class="comment">// 6</span></code></pre></div></div></div><ul><li>深拷贝</li></ul><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">方法1</a></li><li class="tab"><a class="#3-2">方法2</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js"><span class="keyword">const</span> obj = {<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:{<span class="attr">b1</span>:<span class="number">1</span>, <span class="attr">b2</span>:<span class="number">2</span>}, <span class="attr">c</span>:<span class="number">0</span>};<span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">source</span>) </span>{    <span class="keyword">const</span> result = {};    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> source) {        <span class="keyword">if</span> (source.hasOwnProperty(key)) {            <span class="keyword">if</span> (<span class="keyword">typeof</span> source[key] === <span class="string">'object'</span>) {                result[key] = deepClone(source[key]);            } <span class="keyword">else</span> {                result[key] = source[key];            }        }    }    <span class="keyword">return</span> result;}<span class="keyword">const</span> deepObj = deepClone(obj);obj.a = <span class="number">10</span>;<span class="built_in">console</span>.log(deepObj.a); <span class="comment">// 1</span>obj.b.b1 = <span class="number">6</span>;<span class="built_in">console</span>.log(deepObj.b.b1); <span class="comment">// 1</span></code></pre></div><div class="tab-pane" id="3-2"><pre><code class="js"><span class="keyword">const</span> obj = {<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:{<span class="attr">b1</span>:<span class="number">1</span>, <span class="attr">b2</span>:<span class="number">2</span>}, <span class="attr">c</span>:<span class="number">0</span>};<span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">source</span>) </span>{    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(source));}<span class="keyword">const</span> deepObj = deepClone(obj);obj.a = <span class="number">10</span>;<span class="built_in">console</span>.log(deepObj.a); <span class="comment">// 1</span>obj.b.b1 = <span class="number">6</span>;<span class="built_in">console</span>.log(deepObj.b.b1); <span class="comment">// 1</span></code></pre></div></div></div><h3 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h3><div class="tabs" id="4"><ul class="nav-tabs"><li class="tab active"><a class="#4-1">方法1</a></li><li class="tab"><a class="#4-2">方法2</a></li><li class="tab"><a class="#4-3">方法3 Set</a></li></ul><div class="tab-content"><div class="tab-pane active" id="4-1"><pre><code class="js"><span class="comment">// 笨方法</span><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">0</span>];<span class="keyword">const</span> newArr = [];<span class="keyword">let</span> isRepeat;<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) {    isRepeat = <span class="literal">false</span>;    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; newArr.length; j++) {        <span class="keyword">if</span> (arr[i] === newArr[j]) {            isRepeat = <span class="literal">true</span>;            <span class="keyword">break</span>;        }    }    <span class="keyword">if</span> (!isRepeat) {        newArr.push(arr[i]);    }}<span class="built_in">console</span>.log(arr); <span class="comment">// [1, 3, 45, 6, 3, 2, 0]</span><span class="built_in">console</span>.log(newArr); <span class="comment">// [1, 3, 45, 6, 2, 0]</span></code></pre></div><div class="tab-pane" id="4-2"><pre><code class="js"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">0</span>];<span class="keyword">const</span> newArr = arr.filter(<span class="function">(<span class="params">item,index</span>) =&gt;</span> {    <span class="keyword">return</span> arr.indexOf(item) === index})<span class="built_in">console</span>.log(arr); <span class="comment">// [1, 3, 45, 6, 3, 2, 0]</span><span class="built_in">console</span>.log(newArr); <span class="comment">// [1, 3, 45, 6, 2, 0]</span></code></pre></div><div class="tab-pane" id="4-3"><pre><code class="js"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">0</span>];<span class="keyword">const</span> newArr = [...new <span class="built_in">Set</span>(arr)];<span class="built_in">console</span>.log(arr); <span class="comment">// [1, 3, 45, 6, 3, 2, 0]</span><span class="built_in">console</span>.log(newArr); <span class="comment">// [1, 3, 45, 6, 2, 0]</span></code></pre></div></div></div><h3 id="for-in-和-for-of"><a href="#for-in-和-for-of" class="headerlink" title="for in 和 for of"></a>for in 和 for of</h3><ul><li>for in 会遍历数组中的可枚举属性，包括原型。可以遍历对象，遍历的是key值</li><li>for of只是遍历数组的元素或者可以迭代的对象，不包括原型。遍历的是value值。</li></ul><pre><code class="js">Array.prototype.testMethod = function () {    console.log(&#39;testMethod&#39;);}const mArr = [1,2,3,7];const mObject = {    name: &#39;Alan&#39;,    age: 1}for (const key in mArr) {    console.log(mArr[key]);    // 1 2 3 7     /*       ƒ () {        console.log(&#39;testMethod&#39;);      } */}// 解决方案for (const key in mArr) {    if (mArr.hasOwnProperty(key)) {        console.log(mArr[key]);        // 1 2 3 7    }}for (const key in mObject) {    console.log(key);    // name    // age}try {    for (const iterator of mObject) {        console.log(iterator);    }} catch (error) {    console.log(error);    //mObject is not iterable}</code></pre><h3 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h3><p>事件委托利用了事件冒泡，只指定了一个事件处理程序，就可以管理某一类型的所有事件。</p><p>例如，click事件会一直冒泡到document层次。例如下面例子中我们无需对所有li元素添加onclick事件，只需使用事件冒泡的特性来实现事件委托。</p><pre><code class="html">&lt;body&gt;  &lt;ul id=&quot;myList&quot;&gt;    &lt;li id=&quot;sayName&quot;&gt;Name&lt;/li&gt;    &lt;li id=&quot;sayHello&quot;&gt;Hello&lt;/li&gt;    &lt;li id=&quot;sayAge&quot;&gt;Age&lt;/li&gt;  &lt;/ul&gt;  &lt;script&gt;        const myList = document.getElementById(&#39;myList&#39;);    myList.addEventListener(&#39;click&#39;, function (e) {      const target = e.target;      if (target.id === &#39;sayName&#39;) {        alert(&#39;Alan&#39;);      } else if(target.id === &#39;sayHello&#39;) {        alert(&#39;Hello&#39;);      } else {        alert(&#39;sayAge&#39;);      }    })  &lt;/script&gt;&lt;/body&gt;</code></pre><h3 id="实现滑动动画"><a href="#实现滑动动画" class="headerlink" title="实现滑动动画"></a>实现滑动动画</h3><pre><code class="html">&lt;div id=&quot;myDiv&quot;&gt;&lt;/div&gt;&lt;script&gt;    const myDiv = document.getElementById(&#39;myDiv&#39;);    const time = Date.now(); //时间戳    const transition = setInterval(() =&gt; {    const timeLength = Date.now() - time;    const step = (5000 - timeLength) / 1000;    console.log(step);    if (timeLength &gt; 5000) {        clearInterval(transition);        // 5s后结束    }    myDiv.style.left = myDiv.offsetLeft + step + &#39;px&#39;;}, 50);&lt;/script&gt;</code></pre><h3 id="数组扁平化"><a href="#数组扁平化" class="headerlink" title="数组扁平化"></a>数组扁平化</h3><div class="tabs" id="5"><ul class="nav-tabs"><li class="tab active"><a class="#5-1">方法1</a></li><li class="tab"><a class="#5-2">方法2</a></li><li class="tab"><a class="#5-3">方法3</a></li><li class="tab"><a class="#5-4">方法4</a></li></ul><div class="tab-content"><div class="tab-pane active" id="5-1"><pre><code class="js"><span class="comment">// 笨方法：遍历</span><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">7</span>,[<span class="number">2</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">6</span>]];<span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>{    <span class="keyword">let</span> result = [];    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) {        <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(arr[i])) {            result = result.concat(flat(arr[i]));        } <span class="keyword">else</span> {            result.push(arr[i]);        }    }    <span class="keyword">return</span> result;}<span class="built_in">console</span>.log(flat(arr));</code></pre></div><div class="tab-pane" id="5-2"><pre><code class="js"><span class="comment">// 使用for of</span><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">7</span>,[<span class="number">2</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">6</span>]];<span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>{    <span class="keyword">let</span> newArr =[];    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> arr) {        <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(item)){            newArr = newArr.concat(flat(item));        } <span class="keyword">else</span> {            newArr.push(item);        }    }    <span class="keyword">return</span> newArr;}<span class="built_in">console</span>.log(flat(arr));</code></pre></div><div class="tab-pane" id="5-3"><pre><code class="js"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">7</span>,[<span class="number">2</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">6</span>]];<span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>{    <span class="keyword">while</span> (arr.some(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item))) {        arr = [].concat(...arr);    }    <span class="keyword">return</span> arr;}<span class="built_in">console</span>.log(flat(arr));</code></pre></div><div class="tab-pane" id="5-4"><pre><code class="js"><span class="comment">// 骚操作</span><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">7</span>,[<span class="number">2</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">6</span>]];<span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>{    <span class="keyword">const</span> result = arr.toString().split(<span class="string">','</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> {        <span class="keyword">return</span> +item;    });    <span class="keyword">return</span> result;}<span class="built_in">console</span>.log(flat(arr));</code></pre></div></div></div><h3 id="eventLoop"><a href="#eventLoop" class="headerlink" title="eventLoop"></a>eventLoop</h3><p>JS是单线程的，那为什么不是多线程的呢，设想一个场景，一个线程修改了body的background为red，另一个线程修改了body的background为green。那最终浏览器就不知道background到底为什么。由此可以看到多线程会为浏览器的DOM操作带来很多同步问题。<a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">参考资料</a></p><p><strong>JS的任务可以分为同步任务和异步任务。</strong></p><p>1.同步任务优先在主线程上执行，会形成一个执行栈。</p><p>2.异步任务会被放入任务<strong>队列</strong>中，当执行栈清空时会读取任务队列中的任务丢进执行栈中。</p><p>1、2两步反复执行形成了eventLoop。</p><p>如果将任务细分的话还可以分成<strong>宏任务和微任务</strong>：</p><ul><li>macro-task(宏任务)：包括整体代码script，setTimeout，setInterval</li><li>micro-task(微任务)：Promise.then()，process.nextTick</li></ul><p>优先级：process.nextTick&gt;Promise.then()</p><p><strong>当执行栈中没有任务时，微任务总是优先于宏任务执行</strong></p><p>详细查看文章<a href="https://juejin.im/post/59e85eebf265da430d571f89" target="_blank" rel="noopener">这一次，彻底弄懂 JavaScript 执行机制</a></p><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><ul><li>指向<strong>调用</strong>它的那个对象，函数运行时获得的。</li><li>箭头函数的this指向取决于<strong>定义</strong>时最近一层的非箭头函数的this值。取决于外部的上下文。</li></ul><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><ul><li>当前函数的执行上下文中的内容被该上下文以外的内容<strong>占用</strong>，导致当前上下文无法释放。</li><li>闭包是指有权访问另一个函数作用域中的变量的函数。</li><li>创建闭包的常见方式，就是在一个函数内部创建另一个函数</li></ul><p><strong>涉及到函数作用域链，词法作用域，后期有空再补充</strong></p><h3 id="求数组最大值"><a href="#求数组最大值" class="headerlink" title="求数组最大值"></a>求数组最大值</h3><pre><code class="js">const arr = [1,2,1,4,2,10];console.log(Math.max.apply(null, arr));</code></pre><pre><code class="js">const arr = [1,2,1,4,2,10];console.log(arr.sort((a,b) =&gt; (a-b))[arr.length-1]);</code></pre><pre><code class="js">const arr = [1,2,1,4,2,10];console.log(Math.max(...arr));</code></pre><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><pre><code class="js">// new Promise(executor)，当new Promise被创建，executor自动执行let promise = new Promise(function (resolve, reject) {    resolve(&#39;finished&#39;);    // reject(new Error);});// Promise.then(f1,f2) f1在resolve后运行（参数为resolve结果），f2在reject后运行（参数为reject错误）promise.then(    result =&gt; console.log(result), //finished    error =&gt; console.log(error) //输出错误);</code></pre><ul><li>promise.all()同时执行多个promise，只要有一个promise被reject，那么将不再执行</li><li>promise.allSettled()和promise.all()类似，只是会等所有promise执行完。</li><li>promise.race()返回最快执行完的promise结果。</li></ul><p><strong>实现一个sleep</strong></p><pre><code class="js">function sleep(ms) {  return new Promise((resolve) =&gt; {    setTimeout(resolve, ms);  });}(async () =&gt; {  console.log(&#39;2s后输出内容...&#39;);  await sleep(2000);  console.log(&#39;666&#39;);})();</code></pre><div class="note link"><p><a href="https://zh.javascript.info/promise-basics" target="_blank" rel="noopener">https://zh.javascript.info/promise-basics</a></p></div><h3 id="防抖和节流"><a href="#防抖和节流" class="headerlink" title="防抖和节流"></a>防抖和节流</h3><ul><li>节流</li></ul><p>函数在一定时间内只执行一次，比如点击按钮后回去服务器获取数据，使用节流可以防止短时间内请求多次，减少服务器的压力</p><ul><li>防抖</li></ul><p>在一定时间后才执行（触发多次只会执行一次）。应用场景：input搜索框在wait秒后再发送请求</p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;  &lt;title&gt;Document&lt;/title&gt;  &lt;style&gt;    body {      height: 4000px;      width: 100px;      background: rgb(241, 165, 165);    }  &lt;/style&gt;&lt;/head&gt;&lt;body&gt;  &lt;button id=&quot;fetchBtn&quot;&gt;fetch data&lt;/button&gt;  &lt;span&gt;searchBar&lt;/span&gt;&lt;input id=&quot;inputBar&quot;/&gt;  &lt;script&gt;    // 节流    function throttle(func, wait) {      let last = 0;      return function (...args) {        let now = new Date();        if (now - last &gt; wait) {          last = now;          func.apply(this, args);        }      }    }    // 防抖    function debounce(func, wait) {      let timer = 0;      return function (...args) {        if (timer) clearTimeout(timer);        timer = setTimeout(() =&gt; {          func.apply(this, args);        }, wait)      }    }    document.getElementById(&#39;fetchBtn&#39;).addEventListener(&#39;click&#39;, throttle(function (numb) {      console.log(&#39;fetching&#39;);    },1000));    document.getElementById(&#39;inputBar&#39;).addEventListener(&#39;input&#39;, debounce(function (numb) {      console.log(&#39;searching&#39;);    },1000));  &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h3><p>常用方法：</p><ul><li>open(method, url, [async, user, password])初始化，async(false/true)控制同步/异步</li><li>send([body])发送请求</li><li>abort()中止请求</li><li>setRequestHeader(name, value)设置请求头</li></ul><p>常用属性：</p><p>status: 404/200…</p><p>statusText: Not Found/OK…</p><p>responseType: 响应格式</p><p>readyState： 状态</p><p>withCredentials: 跨域设置</p><pre><code class="javascript">UNSENT = 0; // 初始状态OPENED = 1; // open 被调用HEADERS_RECEIVED = 2; // 接收到 response headerLOADING = 3; // 响应正在被加载（接收到一个数据包）DONE = 4; // 请求完成</code></pre><p>常用监听事件：</p><ul><li>onload</li><li>onerror</li><li>onprogress</li></ul><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><pre><code class="js">const a = [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;].map(parseInt);// 数组a中的&#39;1&#39;转化为10进制。console.log(a); // [1, NaN, NaN]// map的三个参数(item,index,array)/* parseInt(string, radix)当radix等于0或者undefined或者没有指定时，如果string以&#39;0x&#39;或者&#39;&#39;0X&#39;开头，则radix=16以&#39;0&#39;开头，根据实际情况radix=10/8。 */</code></pre><pre><code class="js">const users = [    {        name: &#39;Alan&#39;,        age: 19    },    {        name: &#39;Bob&#39;,        age: 25    }];const userList = users.sort((a, b) =&gt; b.age-a.age);// 根据年龄进行排序，注意：sort会改变原来的数组</code></pre><pre><code class="js">function isSameLetter(a, b) {    a = a.toString().toLowerCase();    b = b.toString().toLowerCase();    return a.split(&#39;&#39;).sort().join(&#39;&#39;) === b.split(&#39;&#39;).sort().join(&#39;&#39;);}console.log(isSameLetter(&#39;176as&#39;, &#39;a17s6&#39;));//判断两者是否是由相同的字母组成，顺序可以不一样</code></pre><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="css单位"><a href="#css单位" class="headerlink" title="css单位"></a>css单位</h3><ul><li><p>rem：相对于根元素的字体大小（html）css3</p><p>如果html的font-size为16px（默认），那么1rem=16px</p></li><li><p>em：如果该元素有设置font-size，那么相对于该元素。如果没有设置则相对于父元素。</p><p>例如，div设置了font-size为10px，那么该div中使用em时，1em为10px</p><p>如果该元素没有设置font-size且父元素设置font-size为20px，那么1em为20px</p></li><li><p>vh/vw相对于视窗，10vh=1/10的屏幕高</p></li></ul><h3 id="translate和使用绝对定位的区别"><a href="#translate和使用绝对定位的区别" class="headerlink" title="translate和使用绝对定位的区别"></a>translate和使用绝对定位的区别</h3><p>translate会占据原来的位置，绝对定位会脱离文档流。</p><h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><p>概念：很模糊抽象，是页面上一个隔离的独立容器，容器中的子元素不会影响到外面的元素。</p><p>试用场景：清理浮动，解决margin重叠</p><p><strong>一个元素不能同时存在两个BFC中</strong></p><p>创建方式：</p><ul><li>根元素</li><li>float不为none</li><li>position: absolute/fixed</li><li>display: inline-block/table-cell</li><li>overflow不为visible</li><li>弹性盒子（<code>display: flex/inline-flex</code>）</li></ul><h3 id="清理浮动"><a href="#清理浮动" class="headerlink" title="清理浮动"></a>清理浮动</h3><ul><li><p>伪类元素</p><pre><code class="css">.clearfix::after {    content: &#39;&#39;;    display: blcok;    clear: both;}</code></pre></li><li><p>创建BFC</p><pre><code class="css">overflow: hidden;overflow: auto;</code></pre></li><li><p>空盒子</p><pre><code class="html">&lt;div style=&quot;clear: both;&quot;&gt;&lt;/div&gt;</code></pre></li></ul><h3 id="选择器优先级"><a href="#选择器优先级" class="headerlink" title="选择器优先级"></a>选择器优先级</h3><p><strong>!important &gt; 行内样式&gt;ID选择器 &gt; 类选择器 &gt; 标签 &gt; 通配符 &gt; 继承</strong></p><h3 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h3><pre><code class="html">&lt;div class=&quot;outer&quot;&gt;    &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;&lt;/div&gt;</code></pre><ul><li>table-cell</li></ul><pre><code class="css">.outer {    width: 400px;    height: 400px;    background: aqua;    display: table-cell;    vertical-align: middle;    text-align: center;}.inner {    width: 100px;    height: 100px;    background: brown;    display: inline-block;}</code></pre><ul><li><p>flex布局</p></li><li><p>绝对定位</p><div class="tabs" id="6"><ul class="nav-tabs"><li class="tab active"><a class="#6-1">已知子元素宽高</a></li><li class="tab"><a class="#6-2">未知子元素宽高</a></li><li class="tab"><a class="#6-3">margin</a></li></ul><div class="tab-content"><div class="tab-pane active" id="6-1"><pre><code class="css"><span class="selector-class">.outer</span> {    <span class="attribute">position</span>: relative;}<span class="selector-class">.inner</span> {    <span class="attribute">position</span>: absolute;    <span class="attribute">left</span>: <span class="number">50%</span>;    <span class="attribute">top</span>: <span class="number">50%</span>;    <span class="attribute">margin-left</span>: -<span class="number">50px</span>; <span class="comment">/* 宽度一半 */</span>    <span class="attribute">margin-top</span>: -<span class="number">50px</span>; <span class="comment">/* 高度一半 */</span>}</code></pre></div><div class="tab-pane" id="6-2"><pre><code class="css"><span class="selector-class">.outer</span> {    <span class="attribute">position</span>: relative;}<span class="selector-class">.inner</span> {    <span class="attribute">position</span>: absolute;    <span class="attribute">left</span>: <span class="number">50%</span>;    <span class="attribute">top</span>: <span class="number">50%</span>;    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);}</code></pre></div><div class="tab-pane" id="6-3"><pre><code class="css"><span class="selector-class">.outer</span> {    <span class="attribute">position</span>: relative;}<span class="selector-class">.inner</span> {    <span class="attribute">position</span>: absolute;    <span class="attribute">left</span>: <span class="number">0</span>;    <span class="attribute">right</span>: <span class="number">0</span>;    <span class="attribute">top</span>: <span class="number">0</span>;    <span class="attribute">bottom</span>: <span class="number">0</span>;    <span class="attribute">margin</span>: auto;}</code></pre></div></div></div></li></ul><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><h3 id="meta标签"><a href="#meta标签" class="headerlink" title="meta标签"></a>meta标签</h3><pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</code></pre><h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h3 id="从输入URL到页面加载发生了什么"><a href="#从输入URL到页面加载发生了什么" class="headerlink" title="从输入URL到页面加载发生了什么"></a>从输入URL到页面加载发生了什么</h3><ol><li>浏览器查找当前URL是否存在缓存，并比较缓存是否过期</li><li>根据DNS解析得到IP地址</li><li>建立TCP连接（3次握手）</li><li>HTTP发请求</li><li>服务器处理请求，返回数据</li><li>渲染页面，构建DOM树</li><li>关闭TCP连接（4次挥手）</li></ol><h3 id="常用状态码"><a href="#常用状态码" class="headerlink" title="常用状态码"></a>常用状态码</h3><table><thead><tr><th align="left">分类</th><th align="left">分类描述</th></tr></thead><tbody><tr><td align="left">1**</td><td align="left">信息，服务器收到请求，需要请求者继续执行操作</td></tr><tr><td align="left">2**</td><td align="left">成功，操作被成功接收并处理</td></tr><tr><td align="left">3**</td><td align="left">重定向，需要进一步的操作以完成请求</td></tr><tr><td align="left">4**</td><td align="left">客户端错误，请求包含语法错误或无法完成请求</td></tr><tr><td align="left">5**</td><td align="left">服务器错误，服务器在处理请求的过程中发生了错误</td></tr></tbody></table><table><thead><tr><th align="left">状态码</th><th>描述</th></tr></thead><tbody><tr><td align="left">200</td><td>请求成功</td></tr><tr><td align="left">204</td><td>无内容。服务器成功处理，但未返回内容</td></tr><tr><td align="left">301</td><td>永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替</td></tr><tr><td align="left">302</td><td>临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI</td></tr><tr><td align="left">304</td><td>未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源</td></tr><tr><td align="left">400</td><td>客户端请求的语法错误，服务器无法理解</td></tr><tr><td align="left">401</td><td>请求要求用户的身份认证</td></tr><tr><td align="left">403</td><td>服务器理解请求客户端的请求，但是拒绝执行此请求</td></tr><tr><td align="left">404</td><td>服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置”您所请求的资源无法找到”的个性页面</td></tr><tr><td align="left">500</td><td>服务器内部错误，无法完成请求</td></tr></tbody></table><h3 id="网络七层协议"><a href="#网络七层协议" class="headerlink" title="网络七层协议"></a>网络七层协议</h3><p>引用网上的一张图，如侵权请联系我删除😂</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200601083205320.png" alt="image-20200601083205320"></p><blockquote><p>引自维基百科<a href="https://zh.wikipedia.org/wiki/TCP/IP协议族" target="_blank" rel="noopener">TCP/IP协议族</a>是一个网络通信模型，以及一整个网络传输协议家族，为互联网的基础通信架构。该协议家族的两个核心协议：TCP（传输控制协议）和IP（网际协议），为该家族中最早通过的标准。这个协议族由互联网工程任务组负责维护。</p></blockquote><p><strong>TCP（Transmission Control Protocol 传输控制协议）:</strong>通过三次握手与服务器建立一个<code>全双工</code>的通信，在数据传送之前把数据分割成IP包，在到达服务器时再将他们重组。</p><p><strong>IP（Internet Protocol 网际协议）:</strong>IP负责客户端与服务端之间的通信，IP负责在因特网上发送和接受数据包。通过IP，数据被分割成小的独立的包，然后通过互联网在计算机之间传送。</p><h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>HTTP(HyperText Transfer Protocol)，基于TCP实现的应用层协议。HTTP是一个<strong>无状态</strong>的协议，即客户端和服务端之间不用建立持久的链接，当客户端发送一个请求，服务端返回响应时，连接就被关闭了。</p><p>当请求一个url时<code>www.baidu.com</code>，首先<code>DNS</code>解析出该地址对应的IP地址，然后将相关信息封装成一个HTTP请求数据包。然后TCP（三次握手）建立连接，连接成功后发送HTTP请求，服务端响应回来后，关闭TCP连接。如果浏览器或服务器在头部加入了<code>Connection:keep-alive</code>，那么TCP在发送完信息后仍然保存连接，这样可以减少TCP连接次数，能提升性能和服务器吞吐率。</p><p><strong>缺点：</strong></p><ul><li>通行使用明文，不安全</li><li>不验证身份，可能遭遇伪装</li><li>无法验证报文完整性，可能遭遇篡改</li></ul><p>前面提到了HTTP是一个无状态的协议，那如何让它拥有状态？</p><p>session和cookie</p><p><strong>cookie(key/value形式):</strong></p><p>客户端返回cookie附在响应头中的<code>Set-Cookie</code>或者<code>Set-Cookie2</code>，cookie保存在客户端，下次访问时连同cookie发送给服务端</p><p><strong>cookie的同源和跨域:</strong></p><p>cookie只关注域名，忽略协议和端口，意思是协议或者端口不同不属于跨域</p><p><strong>session机制（服务端维护的），基于cookie工作：</strong></p><p>session和sessionId（返回给客户端）</p><p>当客户端访问服务端时，首先检查请求中是否包括sessionId。如果有，通过sessionId检索出对应session进行一系列操作。如果没有sessionId，创建一个session以此对应的sessionId通过cookie存在客户端，客户端之后访问服务端时通过这个sessionId维护HTTP状态。</p><h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><p><code>HTTPS = HTTP + TLS/SSL</code></p><p>经过加密的HTTP，更加安全，利用<code>SSL/TLS</code>加密数据包；</p><p><code>TLS/SSL</code>:安全传输层协议Transport Layer Security</p><p><strong>TSL/SSL</strong>涉及到三种算法：</p><ul><li>散列函数Hash：MD5、SHA1、SHA256（函数单向不可逆，加密传输信息以及信息摘要）</li><li>对称加密：AES-CBC、DES、3DES、AES-GCM</li><li>非对称加密：RSA（分公钥和私钥）</li></ul><p><strong>TSL工作方式：</strong></p><p>首先使用<strong>非对称加密算法加密</strong>进行通信，服务端返回公钥并协商使用对称加密后的密钥对通信进行加密。</p><p><strong>RSA存在的隐患：</strong></p><p>无法确保服务器身份的合法性（因为公钥不包含服务器信息）：</p><p>例如：</p><p>C（客户端）和S（服务端）通信时，H（劫持者）截获了S与C的通信，H将自己的公钥pub_H给了C，当C向S发送请求时，实际上是使用pub_H加密的，这样H就能获取到C发送的消息了。这样原本属于C和S的通信现在就变成了C和H的通行了。</p><p><strong>解决方案：</strong>引入第三方认证机构，验证公钥拥有者的信息然后颁发证书，简称<code>PKI体系</code></p><pre><code>- S向第三方机构提交公钥和公司相关信息- CA（即三方认证机构）通过一系列渠道验证审核S信息的正确性- 审核通过后，CA向S签发证书，证书信息包括：S的公钥、S公司相关信息、签发机构CA的信息、有效时间、证书序列号（前面这些信息全是明文显示）。签名（使用散列函数计算公开的明文信息的信息摘要，然后用CA的私钥对信息摘要加密）- C向S发送请求，S返回证书- C读取证书中的明文信息，采用相同的散列函数计算得到信息摘要，然后利用CA对应的公钥对签名进行解密，对比证书中的信息摘要来验证证书/公钥的合法性。</code></pre><h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><p>非同源请求，均为跨域。名词解释：<em>同源 —— 如果两个页面拥有相同的协议（protocol），端口（port）和主机（host），那么这两个页面就属于同一个源（origin）。</em></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200403163435103.png" alt="image-20200403163435103"></p><p><strong>jsonp:</strong></p><p>通过script标签的src属性来实现</p><p><strong>CORS:</strong></p><p>服务端设置Access-Control-Allow-Origin和Access-Control-Allow-Credentials为true</p><p>Vue设置跨域：</p><p>vue.http.options.credentials = true</p><p><strong>Nginx代理</strong></p><h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><h3 id="单页应用优缺点"><a href="#单页应用优缺点" class="headerlink" title="单页应用优缺点"></a>单页应用优缺点</h3><p>优点：</p><ul><li>基于ajax加载数据，无需刷新页面，用户体验好</li><li>前后端分离，后端代码可以应用到多端</li><li>减轻服务器压力</li></ul><p>缺点：</p><ul><li>不利于SEO，可以使用SSR解决</li><li>首屏加载速度慢</li><li>不支持浏览器前进后退功能</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> 面试造轮 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0进阶（一）</title>
      <link href="/posts/84d16999/"/>
      <url>/posts/84d16999/</url>
      
        <content type="html"><![CDATA[<p>webpack4.0进阶学习</p><a id="more"></a><h3 id="Tree-Shaking按需打包文件"><a href="#Tree-Shaking按需打包文件" class="headerlink" title="Tree Shaking按需打包文件"></a>Tree Shaking按需打包文件</h3><div class="tabs" id="1"><ul class="nav-tabs"><li class="tab active"><a class="#1-1">index.js</a></li><li class="tab"><a class="#1-2">moment.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="1-1"><pre><code class="js"><span class="keyword">import</span> { used } <span class="keyword">from</span> <span class="string">'./moment'</span>;used();</code></pre></div><div class="tab-pane" id="1-2"><pre><code class="js"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">used</span>(<span class="params"></span>) </span>{  <span class="built_in">console</span>.log(<span class="string">'used function'</span>);}<span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">notUsed</span>(<span class="params"></span>) </span>{  <span class="built_in">console</span>.log(<span class="string">'notUsed funtion'</span>);}</code></pre></div></div></div><p>上面这个例子中我们只使用到了moment中的<code>used</code>，但是打包后连同<code>notUsed</code>一起被打包进了main.js文件中</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200525151309388.png" alt="image-20200525151309388"></p><p>Tree Shaking可以帮我们解决这个问题。</p><div class="note warning"><p>注意：1.Tree Shaking只在production模式下生效。2.只支持ES Module 语法（import），不支持CommonJs</p></div><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">package.json</a></li><li class="tab"><a class="#2-2">webpack.config.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="json">"sideEffects": false,或者"sideEffects": [  "**/*.css",  "**/*.scss",  "./esnext/index.js",  <span class="string">"./esnext/configure.js"</span>],意思是对这些文件不进行tree shaking处理例如import './common.css';虽然我们没有使用common.css的一些东西，但是它起到了样式的作用的，如果不在sideEffect中设置的话，webpack是不会对它进行打包的。</code></pre></div><div class="tab-pane" id="2-2"><pre><code class="js">optimization: {    usedExports: <span class="literal">true</span>,}<span class="comment">// production模式是会自动配置好，可写可不写</span></code></pre></div></div></div><h3 id="开发环境和生产环境配置文件"><a href="#开发环境和生产环境配置文件" class="headerlink" title="开发环境和生产环境配置文件"></a>开发环境和生产环境配置文件</h3><p>由于开发环境需要调试代码所以会引入<code>devServer</code>之类的插件，那么这部分插件在生产环境中是不需要使用到的，我们可以对开发环境和生产环境分别设置不同的配置文件。</p><p>首先安装插件<code>webpack-merge</code>用来将拼接common配置</p><pre><code>npm i webpack-merge -D</code></pre><p>目录如下：</p><pre><code>webpacktest ├── package.json ├── src │   ├── index.html │   ├── index.js │   └── moment.js ├── webpack.common.js ├── webpack.dev.js └── webpack.prod.js</code></pre><p>webpack.common.js</p><pre><code class="js">const path = require(&#39;path&#39;);const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);const { CleanWebpackPlugin } = require(&#39;clean-webpack-plugin&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件  },  module: {    rules: [      {        test: /\.js$/,        exclude: /node_modules/, // 不对node_modules下的js文件处理        loader: &#39;babel-loader&#39;      },      {        test: /\.css$/,        use: [&#39;style-loader&#39;, &#39;css-loader&#39;],      },    ],  },  output: {    // 输出文件配置    filename: &#39;[name].js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;),  },  optimization: {    usedExports: true,  },  plugins: [    new HtmlWebpackPlugin({      template: &#39;./src/index.html&#39;,    }),    new CleanWebpackPlugin(),  ],};</code></pre><p>webpack.dev.js</p><pre><code class="js">const merge = require(&#39;webpack-merge&#39;);const commonConfig = require(&#39;./webpack.common.js&#39;);const devConfig = {  mode: &#39;development&#39;, // 默认为production  devtool: &#39;cheap-module-eval-source-map&#39;,  devServer: {    contentBase: &#39;./dist&#39;,    open: true, // 自动打开浏览器    port: 3001, // 服务器端口号    hot: true, // 开启HRM  }};module.exports = merge(commonConfig, devConfig);</code></pre><p>webpack.prod.js</p><pre><code class="js">const merge = require(&#39;webpack-merge&#39;);const commonConfig = require(&#39;./webpack.common.js&#39;);const prodConfig =  {  mode: &#39;development&#39;, // 默认为production  devtool: &#39;cheap-module-source-map&#39;};module.exports = merge(commonConfig, prodConfig);</code></pre><p>npm script</p><pre><code class="json">&quot;scripts&quot;: {    &quot;dev&quot;: &quot;webpack-dev-server --config webpack.dev.js&quot;,    &quot;build&quot;: &quot;webpack --config webpack.prod.js&quot;},</code></pre><p>配置好后，开发环境使用<code>npm run dev</code>进行打包，生产环境用<code>npm run build</code>进行打包。</p><h3 id="代码分割"><a href="#代码分割" class="headerlink" title="代码分割"></a>代码分割</h3><p>代码分割有利于性能的优化。何为代码分割：</p><p>有这么一个场景，我在<code>index.js</code>中使用到了一些公共代码库/工具库（lodash），<code>index.js</code>中的代码是依赖于lodash中的一些工具的。当我们打包时，lodash也是被打包到了<code>main.js</code>文件中，并且一旦<code>index.js</code>中的业务代码改变了，连同lodash也要一同重新打包加载，但是我们一般是不会去改动lodash这类工具库的。于是我们可以借助代码分割来将业务代码和lodash进行分割，这样下次再修改业务代码时，我们就无需重新加载lodash的内容了。</p><p>先安装lodash</p><pre><code>npm i lodash -S</code></pre><p>这里为了便于查看打包后的文件内容，我们加上一条npm script<code>&quot;start&quot;: &quot;webpack --config webpack.dev.js&quot;</code>(由于devServer不会生成打包内容)</p><p><em>index.js</em></p><pre><code class="js">import _ from &#39;lodash&#39;;console.log(_.compact([0, 1, false, 2, &#39;&#39;, 3]));</code></pre><p><code>npm run start</code>打包，发现打包后的main.js文件中包含lodash内容。</p><p>那如何实现代码分割呢，只需配置webpack.common.js文件</p><pre><code class="js">optimization: {    splitChunks: {        chunks: &#39;all&#39;    }}</code></pre><p>再次打包，发现打包后的文件中多了一个<code>vendor~main.js</code>，webpack自动将lodash内容打包进去了，而main.js文件中就没有了lodash的内容了。</p><pre><code>dist ├── index.html ├── main.js └── vendors~main.js</code></pre><p>上面介绍的时同步代码分割，下面看一下异步代码分割<code>index.js</code>，可以实现<strong>懒加载</strong></p><pre><code class="js">async function createElement() {  const { default: _ } = await import(/* webpackChunkName: &quot;lodash&quot; */&#39;lodash&#39;);  const element = document.createElement(&#39;div&#39;);  element.innerHTML = _.compact([0, 1, false, 2, &#39;&#39;, 3]);  return element;}document.addEventListener(&#39;click&#39;, () =&gt; {  createElement().then(element =&gt; {    document.body.appendChild(element);  })})</code></pre><p><code>/* webpackChunkName: &quot;lodash&quot; */</code>设置打包后的文件名为<code>vendors~lodash.js</code>，打开浏览器可以看到只有点击页面时，才会引入<code>vendors~lodash.js</code>，实现了<strong>懒加载</strong>。</p><p>打包后的目录</p><pre><code>dist ├── index.html ├── main.js ├── vendors~lodash.js └── vendors~main.js</code></pre><p>当然可以通过其他配置来设置打包后的文件名称。</p><div class="note success"><p>代码分割<a href="https://webpack.js.org/plugins/split-chunks-plugin/#optimizationsplitchunks" target="_blank" rel="noopener">更多配置</a></p></div><h3 id="打包分析工具"><a href="#打包分析工具" class="headerlink" title="打包分析工具"></a>打包分析工具</h3><p>首先要拿到<code>status.json</code>文件，具体获取方式只需配置npm script即可</p><pre><code class="json">&quot;start&quot;: &quot;webpack --profile --json &gt; status.json --config webpack.dev.js&quot;,</code></pre><p>打包后会生成<code>status.json</code>文件。</p><p>然后使用<a href="https://webpack.js.org/guides/code-splitting/#bundle-analysis" target="_blank" rel="noopener">官网提供的一些工具</a>就可以可视化分析打包结果了。</p><p>在写代码时，我们要尽可能的使用异步引入，这样可以提高代码的<strong>使用率</strong>，提升性能，减少加载不必要的代码。</p><blockquote><p>查看代码使用率的方法，浏览器控制台按下ctrl+shift+p，输入show coverage</p></blockquote><h3 id="代码优化"><a href="#代码优化" class="headerlink" title="代码优化"></a>代码优化</h3><p>现在有一个优化场景，我有一个登录按钮，当点击按钮后弹出登录框。这里的优化思路是，页面加载时只加载登录按钮的代码，当按钮代码加载完后。利用空闲时间去加载登录框的代码。这样既可以优化首屏加载速度，还可以解决因使用懒加载登录框（也就是点击按钮后再去加载）而带来的用户体验较差的问题。</p><p>具体代码：(只需要在import中加入/* webpackPrefetch: true */)</p><p>index.js</p><pre><code class="js">document.addEventListener(&#39;click&#39;, () =&gt; {  import(/* webpackPrefetch: true */&#39;./loginModal.js&#39;).then(({default: login}) =&gt; {    login();  })})</code></pre><p>loginModal.js</p><pre><code class="js">export default function () {  alert(&#39;loginModal&#39;);}</code></pre><h3 id="css文件处理"><a href="#css文件处理" class="headerlink" title="css文件处理"></a>css文件处理</h3><p><strong>MiniCssExtractPlugin</strong></p><blockquote><p>This plugin should be used only on <code>production</code> builds without <code>style-loader</code> in the loaders chain, especially if you want to have HMR in <code>development</code>.</p></blockquote><p>官方推荐不要在开发环境中使用，因为不支持HMR，不利于提高开发效率。</p><pre><code>npm install --save-dev mini-css-extract-plugin</code></pre><p>index.js</p><pre><code class="js">import &#39;./style.css&#39;;</code></pre><p>style.css</p><pre><code class="css">body {  background: #e65;}</code></pre><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">webpack.common.js</a></li><li class="tab"><a class="#3-2">webpack.dev.js</a></li><li class="tab"><a class="#3-3">webpack.prod.js</a></li><li class="tab"><a class="#3-4">package.json</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);<span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);<span class="keyword">const</span> { CleanWebpackPlugin } = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);<span class="built_in">module</span>.exports = {  mode: <span class="string">'development'</span>, <span class="comment">// 默认为production</span>  entry: {    main: <span class="string">'./src/index.js'</span>, <span class="comment">// 打包入口文件</span>  },  <span class="built_in">module</span>: {    rules: [      {        test: <span class="regexp">/\.js$/</span>,        exclude: <span class="regexp">/node_modules/</span>, <span class="comment">// 不对node_modules下的js文件处理</span>        loader: <span class="string">'babel-loader'</span>,      },    ],  },  output: {    <span class="comment">// 输出文件配置</span>    filename: <span class="string">'[name].js'</span>,    chunkFilename: <span class="string">'[name].chunk.js'</span>,    path: path.resolve(__dirname, <span class="string">'dist'</span>),  },  plugins: [    <span class="keyword">new</span> HtmlWebpackPlugin({      template: <span class="string">'./src/index.html'</span>,    }),    <span class="keyword">new</span> CleanWebpackPlugin(),  ],  optimization: {    usedExports: <span class="literal">true</span>,    splitChunks: {      chunks: <span class="string">'all'</span>,    },  },};</code></pre></div><div class="tab-pane" id="3-2"><pre><code class="js"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);<span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">'./webpack.common.js'</span>);<span class="keyword">const</span> devConfig = {  mode: <span class="string">'development'</span>,  devtool: <span class="string">'cheap-module-eval-source-map'</span>,  devServer: {    contentBase: <span class="string">'./dist'</span>,    open: <span class="literal">true</span>, <span class="comment">// 自动打开浏览器</span>    port: <span class="number">3001</span>, <span class="comment">// 服务器端口号</span>    hot: <span class="literal">true</span>, <span class="comment">// 开启HRM</span>  },  <span class="built_in">module</span>: {    rules: [      {        test: <span class="regexp">/\.css$/</span>,        use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>],      }    ],  },};<span class="built_in">module</span>.exports = merge(commonConfig, devConfig);</code></pre></div><div class="tab-pane" id="3-3"><pre><code class="js"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);<span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">'./webpack.common.js'</span>);<span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);<span class="keyword">const</span> prodConfig =  {  mode: <span class="string">'development'</span>,  devtool: <span class="string">'cheap-module-source-map'</span>,  <span class="built_in">module</span>: {    rules: [      {        test: <span class="regexp">/\.css$/</span>,        use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>],      }    ],  },  plugins: [    <span class="keyword">new</span> MiniCssExtractPlugin({})  ]};<span class="built_in">module</span>.exports = merge(commonConfig, prodConfig);</code></pre></div><div class="tab-pane" id="3-4"><pre><code class="json">"sideEffects": [    <span class="string">"*.css"</span>],</code></pre></div></div></div><p>也可以使用<strong><a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin" target="_blank" rel="noopener">optimize-css-assets-webpack-plugin</a></strong>来压缩css代码</p><h3 id="配置output解决浏览器cache问题"><a href="#配置output解决浏览器cache问题" class="headerlink" title="配置output解决浏览器cache问题"></a>配置output解决浏览器cache问题</h3><p>浏览器是有缓存功能的，在我们第一次加载main.js后，浏览器会保有main.js的缓存，下次再加载时就直接从缓存获取了。但是当我们下次发布新版本时（修改了main.js文件），浏览器还是使用以前缓存的main.js内容，所以显示的内容并不是最新的。</p><p><em>处理方法</em></p><p>设置output的filename，添加<code>[contenthash]</code>占位符。</p><pre><code class="js">output: {    // 输出文件配置    filename: &#39;[name].[contenthash].js&#39;,    chunkFilename: &#39;[name].[contenthash].js&#39;,},</code></pre><h3 id="shimming"><a href="#shimming" class="headerlink" title="shimming"></a>shimming</h3><p>看一个场景，假设library.js是一个比较老的第三方库。</p><div class="tabs" id="6"><ul class="nav-tabs"><li class="tab active"><a class="#6-1">index.js</a></li><li class="tab"><a class="#6-2">library.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="6-1"><pre><code class="js"><span class="keyword">import</span> <span class="string">'./style.css'</span>;<span class="keyword">import</span> { createText } <span class="keyword">from</span> <span class="string">'./library'</span>;createText();</code></pre></div><div class="tab-pane" id="6-2"><pre><code class="js"><span class="comment">// 这个第三方库中使用到了loadsh，但是并没有引入lodash</span><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createText</span>(<span class="params"></span>) </span>{  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>).innerHTML = _.compact([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">''</span>, <span class="number">3</span>]);}</code></pre></div></div></div><p><code>npm run dev</code>打包后浏览器报错</p><div class="note error"><p>Uncaught ReferenceError: _ is not defined</p></div><p>如果<code>library.js</code>是我们自己写的库那还好说，直接自己手动引入lodash就可以了。但是由于是第三方库，源文件是在node_module中的，不利于修改，这个时候就可以用<strong>shimming</strong>来解决了。</p><p><strong>配置webpack.common.js</strong></p><pre><code class="js">// 记得引入const webpack =require(&#39;webpack&#39;);// 下面代码的意思：当遇到_时，会自动为我们添加下面代码// import _ from &#39;lodash&#39;plugins: [    new webpack.ProvidePlugin({        _: &#39;lodash&#39;    })],</code></pre><p>更多配置参考<a href="https://www.webpackjs.com/guides/shimming/" target="_blank" rel="noopener">shimming</a></p><p><strong>细粒度 shimming</strong></p><p>试着在index.js中打印出<strong>this</strong>，发现<strong>this</strong>其实是指向模块本身。那如何把this指向<strong>window</strong>呢，这里要借助<code>imports-loader</code></p><pre><code>npm i imports-loader -D</code></pre><p>配置好loader</p><pre><code class="js">rules: [    {        test: /\.js$/,        exclude: /node_modules/, // 不对node_modules下的js文件处理        use: [            {                loader: &#39;babel-loader&#39;,            },            {                loader: &#39;imports-loader?this=&gt;window&#39;            }        ]    },]</code></pre><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li>Tree Shaking可以实现对js文件的按需打包，只在production下生效。</li><li>为生产和开发环境分别创建不同配置文件。</li><li>利用代码分割实现懒加载（利用魔法注释）。</li><li>利用status.json来分析打包过程。</li><li>单独生成css文件，减少mian.js体积。</li><li>为output文件设置hash值，防止浏览器使用缓存。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记录生活2020/5</title>
      <link href="/posts/66d3b164/"/>
      <url>/posts/66d3b164/</url>
      
        <content type="html"><![CDATA[<p>这是一篇记录5月生活的个人随记。📝</p><a id="more"></a><h3 id="2020-05-22"><a href="#2020-05-22" class="headerlink" title="2020-05-22"></a>2020-05-22</h3><p>现在是22:53，我的论文初稿终于上传审核了🎈，查重率4.8%。记录一下，后天就要线上答辩了。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200522225458201.png" alt="image-20200522225458201"></p>]]></content>
      
      
      <categories>
          
          <category> 记录生活 </category>
          
          <category> 2020 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 记录生活 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0学习总结（四）</title>
      <link href="/posts/35b500c6/"/>
      <url>/posts/35b500c6/</url>
      
        <content type="html"><![CDATA[<p>webpack的devServer热更新以及HMR局部热更新</p><a id="more"></a><h3 id="DevServer"><a href="#DevServer" class="headerlink" title="DevServer"></a>DevServer</h3><p>DevServer可以起一个本地服务并且实现代码的热更新。可以省去我们每次更新代码后重启服务额操作。</p><pre><code>npm i webpack-dev-server -D</code></pre><p>配置文件</p><p>package.json </p><pre><code class="json">&quot;scripts&quot;: {    &quot;build&quot;: &quot;webpack&quot;,    &quot;start&quot;: &quot;webpack-dev-server&quot;},</code></pre><p>webpack.config.js</p><pre><code class="js">devServer: {    contentBase: &#39;./dist&#39;,    open: true, // 自动打开浏览器    port: 3001, // 服务器端口号},</code></pre><p>我们之后只需要使用<code>npm run start</code>就可以把服务跑起来了，之后只要改动代码就会自动更新了，开发效率提高了很多有没有😝</p><p><strong>devServer<a href="https://webpack.js.org/configuration/dev-server/#devserver" target="_blank" rel="noopener">更多配置内容</a></strong></p><h3 id="HMR实现局部热更新"><a href="#HMR实现局部热更新" class="headerlink" title="HMR实现局部热更新"></a>HMR实现局部热更新</h3><p>HMR（Hot Module Replacement）</p><p>当我们更改了部分文件后，我们发现webpack-dev-server帮我们重新渲染所有内容，假如我只改动了一小部分，只想更新这一部分内容就可以用了使用HMR来实现了。</p><p>说再多不如看一个例子</p><p>index.js</p><pre><code class="js">import &#39;./index.css&#39;;var root = document.getElementById(&#39;root&#39;);root.innerHTML = &#39;&lt;button id=&quot;btn&quot;&gt;add new block&lt;/button&gt;&#39;;document.getElementById(&#39;btn&#39;).onclick = function() {  var newBlock = document.createElement(&#39;p&#39;);  newBlock.innerHTML = &#39;new Block&#39;;  root.append(newBlock);}</code></pre><p>index.css</p><pre><code class="css">p {  width: 100px;}p:nth-child(6) {  background: red;}</code></pre><p>这里例子就是点击按钮添加一个p元素，第6个p元素显示为红色背景</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/hrmtest.gif" alt=""></p><p>这个时候我觉得红色不好看，想换成黄色，修改，保存一气呵成。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200518122346853.png" alt="image-20200518122346853"></p><p>结果webpack-dev-server给我全部重新渲染了，我还要再点6下才能看到效果，这里如果是1000（虽然不太可能）呢，那我岂不是要点1000下😱。</p><p>这个时候配置HRM就可以轻松解决这个问题了。</p><p>只需要再webpack.config.js中配置</p><pre><code class="js">devServer: {    contentBase: &#39;./dist&#39;, // Tell the server where to serve content from    open: true, // 自动打开浏览器    port: 3001, // 服务器端口号    hot: true, // 开启HRM},</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/blockTest.gif" alt=""></p><p>搞定😎，不过这里由于有css-loader帮我们做了一些更新的任务，所以我们并没有写过多的代码。那如果没有css-loader处理那怎么办？下面看一下具体配置。</p><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">index.js</a></li><li class="tab"><a class="#3-2">counter.js</a></li><li class="tab"><a class="#3-3">number.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">'./counter'</span><span class="keyword">import</span> <span class="built_in">Number</span> <span class="keyword">from</span> <span class="string">'./number'</span>Counter();<span class="built_in">Number</span>();</code></pre></div><div class="tab-pane" id="3-2"><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>{  <span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);  <span class="keyword">var</span> counter = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  counter.innerHTML = <span class="number">0</span>;  counter.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{    counter.innerHTML = <span class="built_in">parseInt</span>(counter.innerHTML, <span class="number">10</span>) + <span class="number">1</span>;  }  root.append(counter);}<span class="keyword">export</span> <span class="keyword">default</span> Counter;</code></pre></div><div class="tab-pane" id="3-3"><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">Number</span>(<span class="params"></span>) </span>{  <span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);  <span class="keyword">var</span> data = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  data.setAttribute(<span class="string">'id'</span>, <span class="string">'number'</span>);  data.innerHTML = <span class="string">'2000'</span>;  root.append(data);}<span class="keyword">export</span> <span class="keyword">default</span> <span class="built_in">Number</span>;</code></pre></div></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/test3.gif" alt=""></p><p>可以看到当我一改变number，counter中的状态又重新渲染变成0了😩。</p><p>这里我们就要通过一部分代码来处理一下了（css-loader就是帮我们完成了这部分工作）</p><pre><code class="js">import Counter from &#39;./counter&#39;import Number from &#39;./number&#39;Counter();Number();if (module.hot) { // 如果开启HMR  module.hot.accept(&#39;./number.js&#39;, () =&gt; {    var root = document.getElementById(&#39;root&#39;);    root.removeChild(document.getElementById(&#39;number&#39;));    console.log(&#39;number is updated&#39;);    Number();    // 一旦number.js文件改变，进行一系列处理  })}</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/test4.gif" alt=""></p><div class="note link"><p><a href="https://webpack.js.org/guides/hot-module-replacement/" target="_blank" rel="noopener">HMR详细文档</a></p></div><h3 id="处理ES6语法"><a href="#处理ES6语法" class="headerlink" title="处理ES6语法"></a>处理ES6语法</h3><p>我们先用ES6写一些代码</p><pre><code class="js">const name = &#39;Alan&#39;;const list = [1, 8, 4, 6];const resultList = list.filter(item =&gt; item &gt; 5);new Promise(() =&gt; {  console.log(&#39;666&#39;);})console.log(resultList);</code></pre><p><code>npm run build</code>打包看一下chrome效果</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200520142019038.png" alt="image-20200520142019038"></p><p>奈何这个世界上还有IE这种东西😣，IE上看一下效果</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200520142207197.png" alt="image-20200520142207197"></p><p>可以看一下报错的地方：</p><pre><code class="js">eval(&quot;const name = &#39;Alan&#39;;\r\nconst list = [1, 8, 4, 6];\r\n\r\nconst resultList = list.filter(item =&gt; item &gt; 5);\r\n\r\nnew Promise(() =&gt; {\r\n  console.log(&#39;666&#39;);\r\n})\r\n\r\nconsole.log(resultList);\r\n\n\n//# sourceURL=webpack:///./src/index.js?&quot;);</code></pre><p><strong>看来IE是识别不了ES6语法的</strong>，那我们这里就要借助babel处理了。</p><pre><code class="js">npm install --save-dev babel-loader @babel/core @babel/preset-env</code></pre><p><code>@babel/preset-env</code>把ES6转化为ES5</p><p><code>@babel/core</code>babel核心内容</p><p>配置webpack</p><pre><code class="js">{    test: /\.js$/,        exclude: /node_modules/, // 不对node_modules下的js文件处理        loader: &#39;babel-loader&#39;,        options: {            presets: [&#39;@babel/preset-env&#39;]        }},</code></pre><p>再打包看一看</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200520143428061.png" alt="image-20200520143428061"></p><p>打包后的index.js文件</p><pre><code class="js">var name = &#39;Alan&#39;;var list = [1, 8, 4, 6];var resultList = list.filter(function (item) {  return item &gt; 5;});new Promise(function () {  console.log(&#39;666&#39;);});console.log(resultList);</code></pre><p>虽然处理了一些ES6语法（箭头函数，const），但是像filter和Promise还是没有处理的。</p><p>这里就要使用<code>@babel-polyfill</code>，它会模拟一个ES5环境</p><pre><code>npm install --save @babel/polyfill</code></pre><p>安装后在文件开头引入就可以了</p><pre><code class="js">import &#39;@babel/polyfill&#39;;const name = &#39;Alan&#39;;const list = [1, 8, 4, 6];const resultList = list.filter(item =&gt; item &gt; 5);new Promise(() =&gt; {  console.log(&#39;666&#39;);})console.log(resultList);</code></pre><p>再次打包运行</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200520144125415.png" alt="image-20200520144125415"></p><p>虽然效果完成了，但是对比一下没使用<code>@babel/polyfil</code>l和使用了<code>@babel/polyfill</code>打包后的大小😮</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200520144511050.png" alt="image-20200520144511050"></p><p>就引入了一个<code>@babel-polyfill</code>，体积就增加了这么多？</p><p>其实是因为<code>@babel-polyfill</code>模拟了所有的ES5环境，而我们这里只使用了Promise和filter，所以我们可以通过配置<code>useBuiltIns</code>让它只模拟我们使用到的。</p><p>配置了<code>useBuiltIns</code>后，它是会自动帮我们引入<code>@babel/polyfill</code>所以这里我们无需再引入。</p><pre><code class="js">{    test: /\.js$/,        exclude: /node_modules/, // 不对node_modules下的js文件处理         loader: &#39;babel-loader&#39;,          options: {              presets: [[&#39;@babel/preset-env&#39;, {                  useBuiltIns: &#39;usage&#39;              }]]          }},</code></pre><pre><code class="js">main.js   68.6 KiB    main  [emitted]  main</code></pre><p>再看一下打包后的文件小了很多有没有？</p><p>babel的配置是可以单独放在<code>.babelrc</code>文件中的，直接将options中的内容放到.babelrc目录下即可</p><pre><code class="json">{  &quot;presets&quot;: [[&quot;@babel/preset-env&quot;, {    &quot;useBuiltIns&quot;: &quot;usage&quot;  }]]}</code></pre><h3 id="使用-babel-preset-react打包React文件"><a href="#使用-babel-preset-react打包React文件" class="headerlink" title="使用@babel/preset-react打包React文件"></a>使用@babel/preset-react打包React文件</h3><pre><code>npm install --save-dev @babel/preset-react</code></pre><div class="tabs" id="4"><ul class="nav-tabs"><li class="tab active"><a class="#4-1">.babelrc</a></li><li class="tab"><a class="#4-2">index.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="4-1"><pre><code class="json">{  <span class="attr">"presets"</span>: [[<span class="string">"@babel/preset-env"</span>, {    <span class="attr">"useBuiltIns"</span>: <span class="string">"usage"</span>  }],  <span class="string">"@babel/preset-react"</span>  ]}</code></pre></div><div class="tab-pane" id="4-2"><pre><code class="js"><span class="keyword">import</span> React, { Component } <span class="keyword">from</span> <span class="string">'react'</span>;<span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span>;<span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{  render() {     <span class="keyword">return</span> (      &lt;div&gt;Hello React&lt;<span class="regexp">/div&gt;</span><span class="regexp">    );</span><span class="regexp">  }</span><span class="regexp">}</span><span class="regexp"></span><span class="regexp">ReactDom.render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</code></pre></div></div></div><p>这里有一点需要注意一下，presets顺序是从后往前的，和css-loader一样，也就是js文件是先被<code>@babel/preset-react</code>处理的再被<code>@babel/preset-env</code>处理的。</p><h3 id="总结使用的babel"><a href="#总结使用的babel" class="headerlink" title="总结使用的babel"></a>总结使用的babel</h3><p><code>@babel/preset-react</code>处理react的jsx语法</p><p><code>@babel-polyfill</code>处理低版本浏览器无法处理的语法，类似Promise、Array.from、Object.assign</p><p><code>@babel/preset-env</code>把ES6转化为ES5</p><p><code>@babel/core</code>babel核心内容</p><p><code>useBuiltIns:usage</code>按需引入</p><div class="note link"><p>更多配置参考<a href="https://babeljs.io/docs/en/" target="_blank" rel="noopener">babel官网</a></p></div>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0学习总结（三）</title>
      <link href="/posts/829819a3/"/>
      <url>/posts/829819a3/</url>
      
        <content type="html"><![CDATA[<p>这节介绍了webpack一些常用的plugins的使用</p><a id="more"></a><p>我的总结篇的第一节中提到了index.html是需要我们手动移动到打包后的dist目录下的，那我比较懒能不能让webpack来帮我完成呢。🤔</p><p>这个时候plugins就派上了用场。</p><h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h3><blockquote><p>The <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener"><code>HtmlWebpackPlugin</code></a> simplifies creation of HTML files to serve your webpack bundles. This is especially useful for webpack bundles that include a hash in the filename which changes every compilation. You can either let the plugin generate an HTML file for you, supply your own template using <a href="https://lodash.com/docs#template" target="_blank" rel="noopener">lodash templates</a>, or use your own <a href="https://webpack.js.org/loaders" target="_blank" rel="noopener">loader</a>.</p></blockquote><p>官网介绍到，它可以帮我们自动创造HTML文件，并且还可以使用自定义的HTML模板。</p><p>直接看例子：</p><pre><code class="yaml">npm i html-webpack-plugin -D</code></pre><pre><code>webpacktest ├── package-lock.json ├── package.json ├── src │   └── index.js └── webpack.config.js</code></pre><p>index.js</p><pre><code class="js">var root = document.getElementById(&#39;root&#39;);root.innerHTML = &#39;&lt;div&gt;Hello Webpack&lt;/div&gt;&#39;</code></pre><p>webpack.config.js</p><pre><code class="js">const path = require(&#39;path&#39;);const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件  },  output: {    // 输出文件配置    filename: &#39;bundle.js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;),  },  plugins: [new HtmlWebpackPlugin()]};</code></pre><p><code>npm run build</code>进行打包看下结果</p><pre><code>webpacktest ├── dist │   ├── bundle.js │   └── index.html ├── package-lock.json ├── package.json ├── src │   └── index.js └── webpack.config.js</code></pre><p>HtmlWebpackPlugin插件自动为我们生成了index.html，但是…浏览器打开index.html一看什么都没有。这是咋回事，来看一看生成的index.html文件发现了问题</p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html&gt;  &lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;Webpack App&lt;/title&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;&lt;/head&gt;  &lt;body&gt;  &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>生成的文件中是没有<code>#root</code>节点的，那怎么办？我们还需要配置一下HtmlWebpackPlugin，前面官网的介绍中也提到了</p><blockquote><p>You can either let the plugin generate an HTML file for you, supply your own template using <a href="https://lodash.com/docs#template" target="_blank" rel="noopener">lodash templates</a>, or use your own <a href="https://webpack.js.org/loaders" target="_blank" rel="noopener">loader</a></p></blockquote><p>我们需要自己提供一个HTML模板，于是在src目录下创建一个index.html作为HtmlWebpackPlugin打包的模板</p><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">index.html</a></li><li class="tab"><a class="#2-2">webpack.config.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="html"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span>  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span>  <span class="tag">&lt;<span class="name">title</span>&gt;</span>html template<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span>  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre></div><div class="tab-pane" id="2-2"><pre><code class="js">plugins: [<span class="keyword">new</span> HtmlWebpackPlugin({    template: <span class="string">'./src/index.html'</span>})]</code></pre></div></div></div><p>再打包一次看一下dist目录下生成的index.html文件和我们定义的html模板是一样的了。</p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;  &lt;title&gt;html template&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;&lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>打开浏览器发现Hello Webpack也正确显示出来了。🎉</p><h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h3><p><a href="https://www.npmjs.com/package/clean-webpack-plugin" target="_blank" rel="noopener">https://www.npmjs.com/package/clean-webpack-plugin</a></p><p>它的作用就是在每次打包前会将webpack中配置的<code>out.path</code>(dist目录)清空</p><pre><code>npm i clean-webpack-plugin -D</code></pre><p>为了验证是否清空了dist目录，我们先在dist目录下自己创建一个文件my.js</p><pre><code>dist ├── bundle.js ├── index.html └── my.js</code></pre><pre><code class="js">const path = require(&#39;path&#39;);const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);const { CleanWebpackPlugin } = require(&#39;clean-webpack-plugin&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件  },  output: {    // 输出文件配置    filename: &#39;bundle.js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;),  },  plugins: [new HtmlWebpackPlugin({    template: &#39;./src/index.html&#39;  }), new CleanWebpackPlugin()]};</code></pre><p><code>npm run build</code>打包</p><pre><code>dist ├── bundle.js └── index.html</code></pre><p>我们发现之前创建的my.js文件已经被CleanWebpackPlugin给清除了。</p><h3 id="多入口文件"><a href="#多入口文件" class="headerlink" title="多入口文件"></a>多入口文件</h3><p>有时我们的打包入口文件有多个，这时候就要通过设置entry来完成打包。并通过[name]占位符来设置打包出来的文件的名称。</p><pre><code class="js">const path = require(&#39;path&#39;);const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);const { CleanWebpackPlugin } = require(&#39;clean-webpack-plugin&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件    enrty: &#39;./src/entry.js&#39;,  },  output: {    // 输出文件配置    filename: &#39;[name].js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;),  },  plugins: [new HtmlWebpackPlugin({    template: &#39;./src/index.html&#39;  }), new CleanWebpackPlugin()]};</code></pre><p><code>npm run build</code>打包结果</p><pre><code>dist ├── enrty.js ├── index.html └── main.js</code></pre><p>看一看index.html</p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;  &lt;title&gt;html template&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;&lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;enrty.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>可以看到HtmlWebpackPlugin帮我们把<code>main.js</code>和<code>entry.j</code>2个文件都自动引入到html文件当中了。</p><p>在实际业务场景中，为了优化服务器性能，我们会将打包好的dist目录中的一部分文件丢到cdn中来加快访问速度。这时候我们就要将cdn的地址手动复制到打包后的html文件中了，不过我们可以通过设置output的publicPath来完成。</p><pre><code class="js">output: {    // 输出文件配置    filename: &#39;[name].js&#39;,        publicPath: &#39;https://cdn.example.com/assets&#39;,            path: path.resolve(__dirname, &#39;dist&#39;),},</code></pre><p>打包后的效果</p><pre><code class="html">&lt;script src=&quot;https://cdn.example.com/assets/main.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdn.example.com/assets/enrty.js&quot;&gt;&lt;/script&gt;</code></pre><h3 id="SourceMap"><a href="#SourceMap" class="headerlink" title="SourceMap"></a>SourceMap</h3><p>sourcemap是什么，我们修改一下index.js文件内容并且在webpack配置中关闭sourcemap(devtool: ‘none’)</p><p>index.js</p><pre><code class="js">var root = document.getElementById(&#39;root&#39;);errfun();root.innerHTML = &#39;&lt;div&gt;Hello Webpack&lt;/div&gt;&#39;</code></pre><p>webpack.config.js</p><pre><code class="js">const path = require(&#39;path&#39;);const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);const { CleanWebpackPlugin } = require(&#39;clean-webpack-plugin&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  devtool: &#39;none&#39;,  entry: {    main: &#39;./src/index.js&#39;, // 打包入口文件    enrty: &#39;./src/entry.js&#39;,  },  output: {    // 输出文件配置    filename: &#39;[name].js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;),  },  plugins: [new HtmlWebpackPlugin({    template: &#39;./src/index.html&#39;  }), new CleanWebpackPlugin()]};</code></pre><p>index.js中使用了一个不存在的函数errfun()，打包运行一下是会报错的。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200517134620514.png" alt="image-20200517134620514"></p><p>这个时候我们想要调试代码，但是它这里提示的错误行是打包后的main.js所在的位置。</p><p>现在我们配置sourcemap看看。</p><pre><code class="js">devtool: &#39;source-map&#39;,</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200517135446504.png" alt="image-20200517135446504"></p><p>这个时候我们就能定位到错误是出现在我们index.js的第三行了。</p><div class="note info"><p>配置不同sourceMap会不同程度上增加应用的打包时间或消耗性能</p></div><p>官网提供了多种sourceMap配置，不同sourceMap打包消耗时间不同，<a href="https://webpack.js.org/configuration/devtool/" target="_blank" rel="noopener">详情</a>。</p><p>sourcemap其实就是main.js和index.js之间的一种映射关系，在代码存在错误时，它能根据映射关系找到index.js中的错误所在处，有利于我们debug代码。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客定制</title>
      <link href="/posts/b050203a/"/>
      <url>/posts/b050203a/</url>
      
        <content type="html"><![CDATA[<div class="note info"><p>介绍了评论系统以及一些自定义配置</p></div><a id="more"></a><h2 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h2><h3 id="注册一个LeanCloud国际版账号（国内的好像需要绑定域名和备案）"><a href="#注册一个LeanCloud国际版账号（国内的好像需要绑定域名和备案）" class="headerlink" title="注册一个LeanCloud国际版账号（国内的好像需要绑定域名和备案）"></a>注册一个LeanCloud国际版账号（国内的好像需要绑定域名和备案）</h3><p>注册地址👉<a href="https://console.leancloud.app/login.html#/signup" target="_blank" rel="noopener">https://console.leancloud.app/login.html#/signup</a></p><p>之后创建一个应用，名字随便取</p><p>在设置中找到应用keys,把appid和appkey复制到hexo对应的配置当中。由于本文重点讲邮件回复功能，这一部分就不多过赘述了😝。直接进入正题。</p><ul><li><p>修改邮件模板</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516161903124.png" alt="image-20200516161903124"></p></li></ul><pre><code class="html">&lt;p&gt;Hi, {{username}}&lt;/p&gt;&lt;p&gt;你在 {{appname}} 的评论收到了新的回复，请点击查看：&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://alanwang.site&quot; style=&quot;display: inline-block; padding: 10px 20px; border-radius: 4px; background-color: #3090e4; color: #fff; text-decoration: none;&quot;&gt;马上查看&lt;/a&gt;&lt;/p&gt;</code></pre><h3 id="部署valine-admin"><a href="#部署valine-admin" class="headerlink" title="部署valine-admin"></a>部署valine-admin</h3><p>首先进行配置</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516163804087.png" alt="image-20200516163804087"></p><p>更多配置参考：<a href="https://github.com/DesertsP/Valine-Admin" target="_blank" rel="noopener">https://github.com/DesertsP/Valine-Admin</a></p><pre><code>https://github.com/DesertsP/Valine-Admin.git</code></pre><p>网上的zhaojun1998版本我之前也试过，但是在国际版部署是会报错的，看错误信息应该是node版本太低了，而且就算部署成功了，后台也是登录不了的。这个版本我实测是没有问题的。</p><p><strong>部署分支默认为master</strong></p><p>点击部署即可</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516164223578.png" alt="image-20200516164223578"></p><p>点击该链接访问后台管理系统（这里需要用户名和密码登录，需要到存储中的_User中自行创建）</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516164422299.png" alt="image-20200516164422299"></p><p>这里只需要填写username、password、email即可，添加后在后台管理系统输入邮箱和密码就可以成功登录了。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516164630798.png" alt="image-20200516164630798"></p><p>设置定时唤醒</p><pre><code class="js">0 */30 7-23 * * ?</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516164138651.png" alt="image-20200516164138651"></p><h2 id="添加百度统计"><a href="#添加百度统计" class="headerlink" title="添加百度统计"></a>添加百度统计</h2><p>完成以下操作</p><ul><li>注册百度统计账号</li><li>复制统计代码</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200604101820220.png" alt="image-20200604101820220"></p><ul><li>将代码粘贴到<code>G:\blog\themes\volantis\layout\_partial</code>下的footer.ejs</li><li>配置<code>G:\blog\_config.yml</code></li></ul><pre><code>baidu_analytics_key: 上面图片中的key值</code></pre><ul><li>查看是否配置成功</li></ul><p>直接使用官网的代码检查就可以，如果没有用可以使用下面这种方法。</p><p>在控制台network中查看自己的网站是否有<strong>hm</strong>开头的请求，有就代表了成功了，大概20分钟后就可以在百度统计中看到数据了。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200604102323835.png" alt="image-20200604102323835"></p><h2 id="使用hexo-admin管理"><a href="#使用hexo-admin管理" class="headerlink" title="使用hexo-admin管理"></a>使用hexo-admin管理</h2><p>安装hexo-admin</p><pre><code>npm i hexo-admin -S</code></pre><p>运行命令</p><pre><code>hexo s -d</code></pre><p>通过localhost:4000/admin访问即可<br>如需使用hexo-admin中的deploy，只需在_config.yml中配置</p><pre><code class="yml">admin:    deployCommand: &#39;./hexo-deploy.sh&#39;</code></pre><h2 id="hexo-abbrlink生成永久链"><a href="#hexo-abbrlink生成永久链" class="headerlink" title="hexo-abbrlink生成永久链"></a>hexo-abbrlink生成永久链</h2><p>没修改前的链接是这样的</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200612183542458.png" alt="image-20200612183542458"></p><p>我们一旦修改了文章的发布日期， 那么这个链接就会失效了。</p><p>那我们通过hexo-abbrlink处理一下</p><p>首先安装</p><pre><code class="yml">npm i hexo-abbrlink -S</code></pre><p>修改_config.yml下的配置</p><pre><code class="yml">permalink: posts/:abbrlink/abbrlink:    alg: crc32  rep: hex</code></pre><p>详细配置可以查看<a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener">官网</a></p><p>本博客待优化：</p><ul><li>优化seo，收录到百度和谷歌搜索</li><li>样式微调</li><li>去除消耗加载速度的插件</li><li>使用cdn</li></ul>]]></content>
      
      
      <categories>
          
          <category> Hexo博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Valine国际版 </tag>
            
            <tag> Hexo评论系统 </tag>
            
            <tag> DIY博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0学习总结（二）</title>
      <link href="/posts/cf86baf1/"/>
      <url>/posts/cf86baf1/</url>
      
        <content type="html"><![CDATA[<p>这节主要讲一讲一些常见的Loder的使用。包括<code>file-loader</code>、<code>url-loader</code>以及<code>css-loader</code>和<code>style-loader</code>。</p><a id="more"></a><h2 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h2><h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>上一节简单介绍了webpack是什么，webpack是一个模块打包器，可以将es的模块文件进行打包。上一节我们只打包了js文件，那我们能不能打包其他类型的文件呢，先来试一试打包图片吧。</p><p>这里使用到了file-loader</p><pre><code>npm i file-loader -D</code></pre><p>index.js</p><pre><code class="js">// ES Moudule 模块化引入import ComponentB from &#39;./componentB&#39;;var root = document.getElementById(&#39;root&#39;);// CommonJs 模块引入var ComponentA = require(&#39;./componentA&#39;);var img1 = require(&#39;./IMG_3294.jpg&#39;);console.log(img1);var img = new Image();img.src = img1;root.append(img);new ComponentA();new ComponentB(); </code></pre><p>webpack.config.js</p><pre><code class="js">const path = require(&#39;path&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39; // 打包入口文件  },  module: {    rules: [      {        test: /\.jpg$/,        use: {          loader: &#39;file-loader&#39;        }      }    ]  },  output: { // 输出文件配置    filename: &#39;bundle.js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;)  }}</code></pre><p><code>npm run build</code>进行打包，我们看一下控制台打印出来的img1</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/20200515205827.png" alt=""></p><p>这里可以看到img1是一个<code>Module</code>。</p><p>我们可以通过img1.default来获取路径或者直接通过import形式来引入，这样图片就成功得显示出来了😄</p><pre><code class="js">import img1 from &#39;./IMG_3294.jpg&#39;</code></pre><p>通过这个例子可以知道了loader的大致作用方法了，通过<code>test</code>来匹配特定文件使用（<code>use</code>)特定的<code>loader</code>来对文件进行打包处理。</p><p>我们再看一下打包出来的文件</p><pre><code>dist ├── a2099657cfcaf9f019ccf08e9dc8747d.jpg ├── bundle.js └── index.html</code></pre><p>发现我们的图片名称被改变成了一长串字符，那我怎么让它不改变名字呢。这时候loader的<strong>options</strong>就派上用场了😎</p><pre><code class="js">rules: [    {        test: /\.(jpg|png)$/,        use: {            loader: &#39;file-loader&#39;,            options: {                name: &#39;[name].[ext]&#39;            }        }    }]</code></pre><p>这里的<code>[name]</code>和<code>[ext]</code>是loader中的<strong>placeholder</strong>,分别表示文件的名字和后缀名，当然loader中还有很多的<a href="https://webpack.js.org/loaders/file-loader/#placeholders" target="_blank" rel="noopener">placeholder</a>。</p><p>设置好后进行打包得到如下结果</p><pre><code>dist ├── bundle.js ├── IMG_3294.jpg └── index.html</code></pre><p>现在有一个问题，当我们的图片一旦多起来那全部打包放在根目录下拿岂不是很乱，这个时候就可以使用options中的output来规定经过loader处理后的输出路径了。</p><pre><code class="js">options: {    name: &#39;[name].[ext]&#39;,    outputPath: &#39;images/&#39;}</code></pre><p>打包看一下结果成功👌，运行一下html文件图片也可以正常显示。</p><pre><code>dist ├── bundle.js ├── images │   └── IMG_3294.jpg └── index.html</code></pre><p>到这里我们就了解了<strong>file-loader</strong>的基本使用了。</p><h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p>url-loader也可以打包文件，但是和file-loader不同的是，它会将我们的图片转化成base64编码，那如果我不想转化呢，我们可以使用options中的limit属性来限制文件在小于多少时转化成base64编码，一旦大于这个值打包出来的效果就和file-loader一样了。</p><p>看一下例子就清楚了</p><pre><code>npm i url-loader -D</code></pre><p>这里准备两个图片，一个大小300k，一个大小7k</p><p>webpack配置</p><pre><code class="js">const path = require(&#39;path&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39; // 打包入口文件  },  module: {    rules: [      {        test: /\.(jpg|png)$/,        use: {          loader: &#39;url-loader&#39;,          options: {            name: &#39;[name].[ext]&#39;,            outputPath: &#39;images/&#39;,            limit: 10240          }        }      }    ]  },  output: { // 输出文件配置    filename: &#39;bundle.js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;)  }}</code></pre><p>看一下打包后的文件</p><pre><code>dist ├── bundle.js ├── images │   └── 300k.jpg └── index.html</code></pre><p>结果是大于10240的300k.jpg文件被以图片形式打包出来了，那7k.jpg文件去哪了呢，我们在bundle.js文件中可以找到了它，它被转化成了base64编码。</p><pre><code>data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD...</code></pre><p>当然limit也可以设置为true/false，<a href="https://webpack.js.org/loaders/url-loader/#limit" target="_blank" rel="noopener">更多配置</a></p><p>我在操作中发现了如果html中没有使用到7k.jpg，url-loader是不会对它进行打包的。</p><blockquote><p>这里并不建议把大文件转化为base64，这样会增加bundle.js的体积，对项目优化不太友好</p></blockquote><h3 id="样式文件"><a href="#样式文件" class="headerlink" title="样式文件"></a>样式文件</h3><p>接着上面的例子，我现在想要为页面中的图片添加一些样式</p><p>index.js</p><pre><code class="js">// ES Moudule 模块化引入import ComponentB from &#39;./componentB&#39;;import &#39;./index.css&#39;;var root = document.getElementById(&#39;root&#39;);// CommonJs 模块引入var ComponentA = require(&#39;./componentA&#39;);import img1 from &#39;./300k.jpg&#39;;console.log(img1);var img = new Image();img.src = img1;img.classList.add(&#39;circle&#39;);root.append(img);new ComponentA();new ComponentB(); </code></pre><p>index.css</p><pre><code class="css">.circle {  width: 100px;  height: 100px;  border-radius: 50px;}</code></pre><p>现在我想要打包css文件该怎么办呢😶，我们要用到两个loader，<code>css-loader</code>和<code>style-loader</code></p><p>安装</p><pre><code>npm i style-loader css-loader -D</code></pre><p>webpack配置</p><pre><code class="js">{    test: /\.css$/,    use: [&#39;style-loader&#39;, &#39;css-loader&#39;]}</code></pre><p>打包成功，打开网页看一看效果生效了</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200515222855901.png" alt="image-20200515222855901"></p><p>这里简单介绍一下style-loader和css-loader的作用，首先它们执行有先后顺序的，先使用css-loader对css文件进行打包，再用style-loader把打包后的css文件内容以<code>&lt;style&gt;&lt;/style&gt;</code>加到页面的header中。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200515223148666.png" alt="image-20200515223148666"></p><div class="note info"><p>有时候我们要为css加上浏览器引擎前缀-webkit，这里有一个loader可以帮我们完成postcss-loader</p></div><p>安装</p><pre><code>npm i postcss-loader autoprefixer -D</code></pre><p>webpack配置</p><pre><code class="js">{    test: /\.css$/,        use: [&#39;style-loader&#39;, &#39;css-loader&#39;, {            loader: &#39;postcss-loader&#39;,            options: {                ident: &#39;postcss&#39;,                pulgins: [                    require(&#39;autoprefixer&#39;)                ]            }        }],},</code></pre><p>这里貌似有点问题，后期我再研究研究。</p><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><h3 id="css模块化"><a href="#css模块化" class="headerlink" title="css模块化"></a>css模块化</h3><p>先看一个场景</p><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">index.js</a></li><li class="tab"><a class="#3-2">componentA.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js"><span class="keyword">import</span> <span class="string">'./index.css'</span>;<span class="keyword">import</span> img1 <span class="keyword">from</span> <span class="string">'./300k.jpg'</span>;<span class="keyword">import</span> ComponentA <span class="keyword">from</span> <span class="string">'./componentA'</span>;<span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);<span class="keyword">var</span> img = <span class="keyword">new</span> Image();img.src = img1;img.classList.add(<span class="string">'circle'</span>);root.append(img);ComponentA();</code></pre></div><div class="tab-pane" id="3-2"><pre><code class="js"><span class="keyword">import</span> img1 <span class="keyword">from</span> <span class="string">'./300k.jpg'</span>;<span class="function"><span class="keyword">function</span> <span class="title">ComponentA</span>(<span class="params"></span>) </span>{  <span class="keyword">var</span> img = <span class="keyword">new</span> Image();  img.src = img1;  img.classList.add(<span class="string">'circle'</span>);  <span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);  root.append(img);}<span class="keyword">export</span> <span class="keyword">default</span> ComponentA;</code></pre></div></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200516121515523.png" alt="image-20200516121515523"></p><p>我们看到circle样式同样作用在了componentA上了，也就是说circle已经等同于是全局样式了😥。还好我们可以通过配置<code>css-loader</code>的options来使用css的模块化来解决这个问题。</p><pre><code class="js">{    test: /\.css$/,        use: [            &#39;style-loader&#39;,            {                loader: &#39;css-loader&#39;,                options: {                    modules: true,                }            },            {                loader: &#39;postcss-loader&#39;,                options: {                    ident: &#39;postcss&#39;,                    pulgins: [require(&#39;autoprefixer&#39;)],                },            },        ],},</code></pre><p>配置好后我们在要使用样式的地方使用下面这种写法</p><pre><code class="js">import circle from &#39;./index.css&#39;;img.classList.add(circle.circle);</code></pre><p>这样我们再修改样式就不会影响到其他地方了。</p><h3 id="css外部引入"><a href="#css外部引入" class="headerlink" title="css外部引入"></a>css外部引入</h3><p>这里主要介绍css-loader的options<code>importLoaders</code>。</p><p>我们在index.css文件中引入外部css文件</p><pre><code class="css">@import &#39;./import.css&#39;;</code></pre><p>假设我们有以下几个loader处理css文件</p><p><code>[&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39;, &#39;postcss-loader&#39;]</code></p><p>当webpack处理index.css文件时按照postcss-loader-&gt;sass-loader-&gt;css-loader顺序来执行css文件的</p><p>当遇到@import时处理import.css时，如果不做处理的话，import.css将直接从css-loader开始处理的，那我想让它从postcss-loader从头处理的话就要设置imortLoaders数目了。</p><pre><code class="js">{    loader: &#39;css-loader&#39;,    options: {        importLoaders: 1,    }},</code></pre><p>这里的1表示处理@import引入的css文件是，先要被前面的1个loader处理，也就是import.css的处理顺序是sass-loader-&gt;css-loader-style-loader。</p><h3 id="处理字体文件"><a href="#处理字体文件" class="headerlink" title="处理字体文件"></a>处理字体文件</h3><p>直接使用<code>file-loader</code>处理就可以了</p><div class="tabs" id="4"><ul class="nav-tabs"><li class="tab active"><a class="#4-1">webpack.config.js</a></li><li class="tab"><a class="#4-2">index.js</a></li><li class="tab"><a class="#4-3">iconfont.css</a></li></ul><div class="tab-content"><div class="tab-pane active" id="4-1"><pre><code class="js">{    test: <span class="regexp">/\.(eot|ttf|svg|woff)$/</span>,    use: {        loader: <span class="string">'file-loader'</span>,    },},</code></pre></div><div class="tab-pane" id="4-2"><pre><code class="js"><span class="keyword">import</span> <span class="string">'./font/iconfont.css'</span>;<span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);root.innerHTML = <span class="string">'&lt;div class="iconfont icon-smile"&gt;&lt;/div&gt;'</span></code></pre></div><div class="tab-pane" id="4-3"><pre><code class="js">@font-face {font-family: <span class="string">"iconfont"</span>;  src: url(<span class="string">'iconfont.eot?t=1589604469136'</span>); <span class="comment">/* IE9 */</span>  src: url(<span class="string">'iconfont.eot?t=1589604469136#iefix'</span>) format(<span class="string">'embedded-opentype'</span>), <span class="comment">/* IE6-IE8 */</span>  url(<span class="string">'data:application/x-font-woff2;charset=utf-8;base64,这里base64代码太长删除掉了'</span>) format(<span class="string">'woff2'</span>),  url(<span class="string">'iconfont.woff?t=1589604469136'</span>) format(<span class="string">'woff'</span>),  url(<span class="string">'iconfont.ttf?t=1589604469136'</span>) format(<span class="string">'truetype'</span>), <span class="comment">/* chrome, firefox, opera, Safari, Android, iOS 4.2+ */</span>  url(<span class="string">'iconfont.svg?t=1589604469136#iconfont'</span>) format(<span class="string">'svg'</span>); <span class="comment">/* iOS 4.1- */</span>}.iconfont {  font-family: <span class="string">"iconfont"</span> !important;  font-size: <span class="number">16</span>px;  font-style: normal;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.icon-smile:before {  content: <span class="string">"\e783"</span>;}</code></pre></div></div></div><p>ok!这章到此介绍。现在我们已经能够处理一些常见文件的打包了，对webpack的认识也应该算一个简单的入门了。😁</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0学习总结（一）</title>
      <link href="/posts/ff905629/"/>
      <url>/posts/ff905629/</url>
      
        <content type="html"><![CDATA[<p>这一篇文章主要简单介绍了webpack是什么以及webpack的一些简单配置，你只要跟着我敲完这些代码后一定会对webpack有一个基本的了解的。😎</p><a id="more"></a><h2 id="webpack是一个模块打包器"><a href="#webpack是一个模块打包器" class="headerlink" title="webpack是一个模块打包器"></a>webpack是一个模块打包器</h2><blockquote><p>本质上，<em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <em>bundle</em>。</p></blockquote><p>上面引用了webpack官网的一段介绍，我们可以简单的理解webpack是一个模块打包器，那什么是模块打包器呢？😂先看一个简单的例子</p><div class="tabs" id="1"><ul class="nav-tabs"><li class="tab active"><a class="#1-1">index.html</a></li><li class="tab"><a class="#1-2">index.js</a></li><li class="tab"><a class="#1-3">componentA.js</a></li><li class="tab"><a class="#1-4">componentB.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="1-1"><pre><code class="html"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span>  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span>  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span>  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre></div><div class="tab-pane" id="1-2"><pre><code class="js"><span class="comment">// ES Moudule 模块化引入</span><span class="keyword">import</span> ComponentB <span class="keyword">from</span> <span class="string">'./componentB'</span>;<span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);<span class="comment">// CommonJs 模块引入</span><span class="keyword">var</span> ComponentA = <span class="built_in">require</span>(<span class="string">'./componentA'</span>);<span class="keyword">new</span> ComponentA();<span class="keyword">new</span> ComponentB(); </code></pre></div><div class="tab-pane" id="1-3"><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">ComponentA</span>(<span class="params"></span>) </span>{  <span class="keyword">var</span> componentA = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  componentA.innerHTML = <span class="string">'ComponentA'</span>;  root.append(componentA);}<span class="built_in">module</span>.exports = ComponentA;</code></pre></div><div class="tab-pane" id="1-4"><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">ComponentB</span>(<span class="params"></span>) </span>{  <span class="keyword">var</span> componentB = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  componentB.innerHTML = <span class="string">'ComponentB'</span>;  root.append(componentB);}<span class="keyword">export</span> <span class="keyword">default</span> ComponentB;</code></pre></div></div></div><p>这里的模块可以理解成<code>componentA</code>和<code>componentB</code>，这种写法在<code>vue</code>和<code>react</code>中非常常见，写完这些文件后打开<code>index.html</code>文件，浏览器是会报错的。</p><div class="note error"><p>Uncaught SyntaxError: Cannot use import statement outside a module</p></div><p>这是由于这里使用了es6中的模板引入的方式，浏览器是识别不了这种方式的，那怎么办呢？😥</p><p>这个时候webpack就派上用场了，首先初始化该项目</p><pre><code>npm init -y</code></pre><p>初始化后会生成<code>package.json</code>文件</p><p><strong>安装webpack-cli和webpack</strong>（不建议全局安装）</p><pre><code>npm install webpack-cli -Dnpm install webpack -S</code></pre><p>安装固定版本的webpack</p><pre><code>npm install webpack@版本号npm info webpack  // 查看包信息</code></pre><p>打包index.js</p><pre><code>npx webpack index.js</code></pre><blockquote><p>这里如果不使用npx的话node会默认在全局环境中找寻webpack，加上npx的话就会使用项目中安装的webpack来执行命令 </p></blockquote><p>打包后可以看到根目录下多了一个dist文件夹（webpack默认设置好的，后面会讲如何改变），里面有一个main.js文件，这个文件就是经过webpack处理后的index.js。</p><p>然后我们修改一下<code>index.html</code>的代码</p><pre><code class="html">&lt;script src=&quot;./dist/main.js&quot;&gt;&lt;/script&gt;</code></pre><p>这下浏览器就能正常识别html中的js文件了，到这里为止理解webpack是一个模块打包器应该不是很难了吧。webpack将模块<code>componentA</code>和<code>componentB</code>打包生成了最后的<code>main.js</code>。</p><h2 id="webpack配置文件"><a href="#webpack配置文件" class="headerlink" title="webpack配置文件"></a>webpack配置文件</h2><p>webpack的配置文件名默认是<code>webpack.config.js</code>，当然我们也可以指定配置文件。</p><p>开始之前我们先修改一下项目目录</p><pre><code>webpacktest ├── index.html ├── package-lock.json ├── package.json ├── src │   ├── componentA.js │   ├── componentB.js │   └── index.js └── webpack.config.js</code></pre><p>在项目根目录下新建配置文件webpack.config.js：</p><pre><code class="js">const path = require(&#39;path&#39;);module.exports = {  mode: &#39;development&#39;, // 默认为production  entry: {    main: &#39;./src/index.js&#39; // 打包入口文件  },  output: { // 输出文件配置    filename: &#39;bundle.js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;)  }}</code></pre><p>上面引用的path是node中的一个模块，<code>__dirname</code>表示webpack.config.js所在的目录。</p><p><em>entry可以简写为entry: ‘./src/index.js’</em></p><div class="note info"><p>mode中的development和production有什么区别呢</p></div><p>我们看一下打包出来的文件bundle.js就知道了，production模式下的代码是一整行的，体积更小。而development模式下的代码不是一整行的有利于调试。</p><div class="note link"><p>node path的 <a href="http://nodejs.cn/api/path.html#path_path_resolve_paths" target="_blank" rel="noopener">更多</a></p></div><p>执行下面命令后即可完成打包，效果和上一节一样</p><pre><code>npx webpack</code></pre><p>当然也可以使用自定义配置文件</p><pre><code>npx webpack --config 自定义配置文件</code></pre><p>写过项目的小伙伴应该都发现平时都是使用<code>npm run xxx</code>来打包项目的，下面就来介绍一下如何配置</p><p>修改package.json文件中的script</p><pre><code class="json">&quot;scripts&quot;: {    &quot;build&quot;: &quot;webpack&quot;},</code></pre><p>这样就可以通过<code>npm run build</code>来进行打包了，不过看过第一节的小伙伴肯定有疑问了，这样配置会不会使用全局的webpack去进行打包呢🙄，其实并不会，这里<code>npm script</code>命令会在项目的<code>node_modules</code>文件中去寻找webpack并执行。</p><p>打包好后我们打开index.html看看，发现是会报错的，这里注意：我们要手动把index.html移动到dist目录下并修改一下js路径，因为webpack并没有将index.html打包到dist目录下。</p><pre><code class="html">&lt;script src=&quot;./bundle.js&quot;&gt;&lt;/script&gt;</code></pre><p>这下再运行index.html就没有任何问题了。🎉</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> webpack4.0学习总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack4.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react博客-egg-jwt实现登录系统</title>
      <link href="/posts/3b0a6cbe/"/>
      <url>/posts/3b0a6cbe/</url>
      
        <content type="html"><![CDATA[<p>react博客系列文章</p><a id="more"></a><h2 id="何为jwt"><a href="#何为jwt" class="headerlink" title="何为jwt"></a>何为jwt</h2><h2 id="egg-jwt"><a href="#egg-jwt" class="headerlink" title="egg-jwt"></a>egg-jwt</h2><h3 id="安装egg-jwt"><a href="#安装egg-jwt" class="headerlink" title="安装egg-jwt"></a>安装egg-jwt</h3><p><code>yarn add egg-jwt</code></p><h3 id="配置egg-jwt"><a href="#配置egg-jwt" class="headerlink" title="配置egg-jwt"></a>配置egg-jwt</h3><ol><li>配置<code>config/plugin.js</code>文件</li></ol><pre><code class="js">exports.jwt = {  enable: true,  package: &#39;egg-jwt&#39;,};</code></pre><ol start="2"><li>配置<code>config/config.default.js</code>文件</li></ol><pre><code class="js">// 自己设定的密钥，用于对信息进行签名config.jwt = {  secret: &#39;xxxxxx&#39;,};</code></pre><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="后台实现登录操作返回token"><a href="#后台实现登录操作返回token" class="headerlink" title="后台实现登录操作返回token"></a>后台实现登录操作返回token</h3><ol><li>路由层</li></ol><p>在第二个参数上加上jwt即可实现对该路由的鉴权 </p><p>下面的jwt是自定义的中间件<code>auth.js</code>，该文件在下一部分介绍</p><pre><code class="js">&#39;use strict&#39;;/** * @param {Egg.Application} app - egg application */module.exports = app =&gt; {  const { router, controller, middleware, config } = app;  const { admin } = controller.admin;  const jwt = middleware.auth(config.jwt);  router.post(&#39;/admin/login&#39;, admin.login);  // 需要鉴权的路由再第二个参数上加上jwt  router.get(&#39;/admin/get_type_list&#39;, jwt, admin.getTypeList);};</code></pre><ol start="2"><li>controller层</li></ol><p>使用<code>jwt.sign(加密数据, 密钥, [options, callback])</code> 来生成token</p><p>相关配置可以查看<a href="https://www.npmjs.com/package/jsonwebtoken" target="_blank" rel="noopener">jsonwebtoken</a></p><pre><code class="js">async login() {    const { app, ctx } = this;    const { username, password } = ctx.request.body;    const checkValidate = await ctx.service.admin.admin.checkUserValidate(username, password);    if (checkValidate) {        // 将信息使用jwt进行签名加密生成token，expiresIn（token有效时间）        const token = app.jwt.sign({ username, password }, app.config.jwt.secret, { expiresIn: &#39;2h&#39; });        ctx.body = {            code: &#39;0001&#39;,            msg: &#39;登录成功&#39;,            token,        };    } else {        ctx.body = {            code: &#39;0002&#39;,            msg: &#39;用户名或者密码错误，请重试！&#39;,        };    }}</code></pre><ol start="3"><li>service层</li></ol><pre><code class="js">async checkUserValidate(username, password) {  const isValidate = await this.app.mysql.get(&#39;admin&#39;, { username, password });  return !!isValidate;}</code></pre><ol start="4"><li>使用postman进行测试</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200502125430201.png" alt="image-20200502125430201"></p><p>将生成的token返回给前台后使用<code>localStorage.setItem</code>把<code>token</code>保存到本地</p><h3 id="前台传递token进行鉴权"><a href="#前台传递token进行鉴权" class="headerlink" title="前台传递token进行鉴权"></a>前台传递token进行鉴权</h3><h4 id="封装axios"><a href="#封装axios" class="headerlink" title="封装axios"></a>封装axios</h4><p>新建axios文件对axio进行封装，通过axios的拦截器来实现每次请求时自动在headers上携带token数据到后台，后台使用<code>jwt.verify</code>来检验token的正确性</p><p><em>axios.js</em></p><pre><code class="js">import axios from &#39;axios&#39;;axios.interceptors.request.use(config =&gt; {  // 登录成功后保存在本地的token  const token = localStorage.getItem(&#39;token&#39;);  config.headers.Authorization = `Bearer ${token}`;  return config;});axios.interceptors.response.use(response =&gt; {  // code是后台接口设置的  const { code } = response.data;  if (code === &#39;0003&#39; || code === &#39;0004&#39;) {    window.location.href = &#39;/login&#39;;  }  return response;});export default axios;</code></pre><p>封装好后，之后都使用该封装好后的axios进行请求。</p><h4 id="后台校验处理"><a href="#后台校验处理" class="headerlink" title="后台校验处理"></a>后台校验处理</h4><p><em>auth.js</em></p><pre><code class="js">&#39;use strict&#39;;module.exports = options =&gt; {  return async function auth(ctx, next) {    // 获取前台通过axios封装后穿过来的token    const token = ctx.header.authorization;    if (token) {      try {        // 验证并对token进行解码        const decode = ctx.app.jwt.verify(token.split(&#39; &#39;)[1], options.secret);        console.log(decode);        await next();      } catch (error) {        console.log(error.name);        if (error.name === &#39;JsonWebTokenError&#39; || error.name === &#39;TokenExpiredError&#39;) {          // 这里的错误有许多种情况：1.token错误，2.token过期... 这里统一处理为鉴权失败          ctx.body = {            code: &#39;0003&#39;,            msg: &#39;用户鉴权失败，请重新登录&#39;,          };        } else {          throw error;        }      }    } else {      ctx.body = {        code: &#39;0004&#39;,        msg: &#39;您没有登录，请先登录&#39;,      };    }  };};</code></pre><p>后台通过<code>/middleware/auth.js</code>中间件来实现给需要鉴权的接口进行鉴权，通过对前台传过来的token数据进行验证<code>jwt.verify</code>来识别登录状态。对<code>JsonWebTokenError</code>错误统一处理，应为<code>auth.js</code>作为中间件，所以接口中出现的其他错误也会在这里被catch到，对于不是<code>JsonWebTokenError</code>的错误，直接把错误抛出去。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> 博客 </tag>
            
            <tag> ReactHook </tag>
            
            <tag> jwt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react博客-项目部署</title>
      <link href="/posts/d4ddb122/"/>
      <url>/posts/d4ddb122/</url>
      
        <content type="html"><![CDATA[<p>阿里云最近推出了一个“在家实践活动”，<strong>免费</strong>领取半年的服务器，真香。<a href="https://developer.aliyun.com/adc/student/" target="_blank" rel="noopener">领取地址</a></p><a id="more"></a><h2 id="购买阿里云服务器"><a href="#购买阿里云服务器" class="headerlink" title="购买阿里云服务器"></a>购买阿里云服务器</h2><p>购买完成后会得到一个<code>公网ip</code></p><p>下载软件<code>putty</code>来连接我们刚才购买的服务器，只需输入公网ip点击open即可</p><p>在命令行中输入用户名<code>root</code>和密码得到<code>Welcome to Alibaba Cloud Elastic Compute Service !</code>即完成了连接。</p><h2 id="使用宝塔进行管理"><a href="#使用宝塔进行管理" class="headerlink" title="使用宝塔进行管理"></a>使用宝塔进行管理</h2><p><a href="https://www.bt.cn/bbs/thread-19376-1-1.html" target="_blank" rel="noopener">https://www.bt.cn/bbs/thread-19376-1-1.html</a></p><p>连接成功服务器后在命令行输入(<strong>Centos</strong>系统，其他系统查看上面网址)，复制按下鼠标右键完成宝塔的安装</p><pre><code>yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</code></pre><p>安装成功后会返回一个端口号为8888的网站以及账号和密码：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200507135712898.png" alt="image-20200507135712898"></p><p>访问该地址，这个时候网站时不能访问的，因为远程服务器没有开放8888端口。</p><p>设置教程：</p><p><a href="https://www.bt.cn/bbs/thread-2897-1-1.html" target="_blank" rel="noopener">https://www.bt.cn/bbs/thread-2897-1-1.html</a></p><p>登录成功后安装mysql和nginx（之后几乎所有的操作都在宝塔上进行）</p><h3 id="需要安装软件"><a href="#需要安装软件" class="headerlink" title="需要安装软件"></a>需要安装软件</h3><ul><li>php环境（用于phpmyadmin）</li><li>phpMyAdmin（用于管理mysql数据库）</li><li>PM2（自带node环境）</li><li>nginx</li></ul><h3 id="开放80-http-端口访问服务器"><a href="#开放80-http-端口访问服务器" class="headerlink" title="开放80(http)端口访问服务器"></a>开放80(http)端口访问服务器</h3><p>在阿里云服务器管理控制台安全组中设置</p><p>设置后就可以通过公网ip访问服务器了</p><h2 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h2><h3 id="切换镜像源"><a href="#切换镜像源" class="headerlink" title="切换镜像源"></a>切换镜像源</h3><p>安装nrm（用来管理npm镜像源的工具）<code>npm install -g nrm</code></p><p>常用命令</p><ul><li>nrm ls   查看所有源地址</li><li>nrm use taobao  切换为淘宝镜像源</li><li>nrm add [name] [url]  添加源地址</li></ul><h3 id="通过git克隆代码到服务器"><a href="#通过git克隆代码到服务器" class="headerlink" title="通过git克隆代码到服务器"></a>通过git克隆代码到服务器</h3><p>把代码clone到服务器</p><h3 id="打包项目并且部署"><a href="#打包项目并且部署" class="headerlink" title="打包项目并且部署"></a>打包项目并且部署</h3><ul><li>部署前台页面（next.js）</li></ul><p><code>yarn build</code></p><p><code>yarn start</code></p><p>或者用PM2进行进程守护（待研究）</p><ul><li>部署后台接口（egg.js）</li></ul><p><code>npm start</code></p><ul><li>部署后台管理系统</li></ul><p>直接<code>npm build</code>然后使用nginx进行代理</p><h3 id="导入mysql数据出错"><a href="#导入mysql数据出错" class="headerlink" title="导入mysql数据出错"></a>导入mysql数据出错</h3><p>在导入本地mysql文件时遇到了一些错误，参考文章：</p><blockquote><p><a href="https://www.jianshu.com/p/788dceb93eff" target="_blank" rel="noopener">https://www.jianshu.com/p/788dceb93eff</a></p></blockquote><h3 id="Linux查看端口号占用情况以及杀进程命令"><a href="#Linux查看端口号占用情况以及杀进程命令" class="headerlink" title="Linux查看端口号占用情况以及杀进程命令"></a>Linux查看端口号占用情况以及杀进程命令</h3><ul><li><p>netstart -anp（查看端口占用情况）</p></li><li><p>lsof -i:8080（查看8080端口占用情况）</p></li><li><p>kill -9 1234（杀PID=1234进程）</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> 博客 </tag>
            
            <tag> 部署 </tag>
            
            <tag> 阿里云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试主题</title>
      <link href="/posts/f032f0/"/>
      <url>/posts/f032f0/</url>
      
        <content type="html"><![CDATA[<p>这里是摘要</p><a id="more"></a><p>这里是正文</p><pre><code>title: 测试主题date: 2020-05-13 09:19:17top: truecategories: 测试分类tags: 测试标签author:    name: 测试作者    avatar: https://gitee.com/alannum3/MyImages/raw/master/img/20200508165134.pngmusic:# 文章音乐  server: netease   # netease, tencent, kugou, xiami, baidu  type: song        # song, playlist, album, search,     artist  id: 16846091 thumbnail:# 文章缩略图https://gitee.com/alannum3/MyImages/raw/master/img/20200508165134.png# 归档页面对应文章图标icons: [fas fa-fire red, fas fa-star green]meta:# 文章底部按钮  footer: [btns]btns:  repo: https://github.com/xaoxuu/hexo-theme-volantis  bug: https://github.com/xaoxuu/hexo-theme-volantis/issues/  doubt: https://github.com/xaoxuu/hexo-theme-volantis/issues/  idea: https://github.com/xaoxuu/hexo-theme-volantis/issues/cover: false #是否显示封面图</code></pre><h1 id="h1"><a href="#h1" class="headerlink" title="h1"></a>h1</h1><h2 id="h2"><a href="#h2" class="headerlink" title="h2"></a>h2</h2><h3 id="h3"><a href="#h3" class="headerlink" title="h3"></a>h3</h3><pre><code>代码块</code></pre><div class="tabs" id="1"><ul class="nav-tabs"><li class="tab active"><a class="#1-1">index.js</a></li><li class="tab"><a class="#1-2">index.js</a></li><li class="tab"><a class="#1-3">index.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="1-1"><pre><code class="js">jsdalkjfda</code></pre></div><div class="tab-pane" id="1-2"><pre><code class="js">jsdalkjfda</code></pre></div><div class="tab-pane" id="1-3"><pre><code class="js">jsdalkjfda</code></pre></div></div></div><div class="tabs" id="2"><ul class="nav-tabs"><li class="tab active"><a class="#2-1">index.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="2-1"><pre><code class="js">jsdalkjfda</code></pre></div></div></div><div class="tabs" id="3"><ul class="nav-tabs"><li class="tab active"><a class="#3-1">index.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="3-1"><pre><code class="js">jsdalkjfda</code></pre></div></div></div><div class="tabs" id="4"><ul class="nav-tabs"><li class="tab active"><a class="#4-1">index.js</a></li></ul><div class="tab-content"><div class="tab-pane active" id="4-1"><pre><code class="js">jsdalkjfda</code></pre></div></div></div>]]></content>
      
      
      <categories>
          
          <category> 测试分类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试标签 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora+PicGo+Gitee（书写博客神器）</title>
      <link href="/posts/24b4915a/"/>
      <url>/posts/24b4915a/</url>
      
        <content type="html"><![CDATA[<p>写博客，难免会随手截图来解释博客中的一些知识点或者内容。当高高兴兴地在本地电脑写完博客后将它上传之后发现所有图片都浏览不了了，这其实就是因为图片都保存在本地了。为了解决这个问题，从长远和财力来考虑，我使用了<code>gitee</code>搭配开源项目<code>PicGo</code>来做图床生成在线图片链接，这样无论在哪都能畅通查看图片了。而不使用<code>github</code>主要是国内访问速度是非常地慢。</p><a id="more"></a> <blockquote><p>参考文章：<a href="https://blog.csdn.net/disILLL/article/details/104944710" target="_blank" rel="noopener">https://blog.csdn.net/disILLL/article/details/104944710</a></p></blockquote><h2 id="开搞"><a href="#开搞" class="headerlink" title="开搞"></a>开搞</h2><h3 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h3><ul><li>typora 0.9.86</li><li>PicGo 2.2.2</li></ul><h3 id="创建gitee仓库"><a href="#创建gitee仓库" class="headerlink" title="创建gitee仓库"></a>创建gitee仓库</h3><p>在gitee账户中创建一个公开的仓库用来保存图片</p><h3 id="PicGo配置"><a href="#PicGo配置" class="headerlink" title="PicGo配置"></a>PicGo配置</h3><div class="note info red"><p>这边安装有一个巨坑，不要安装在Programe Files目录下面，切记</p></div><ol><li><p>安装<code>gitee-uploader</code>插件</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200505112347432.png" alt="image-20200505112347432"></p></li><li><p>安装完后配置gitee</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200505112433744.png" alt="image-20200505112433744"></p></li></ol><p><code>token</code>在自己的gitee中创建</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200505112543290.png" alt="image-20200505112543290"></p><p>点击commit生成<code>token</code>，将<code>token</code>填入PicGo中点击确定即可。</p><div class="note info red"><p>检查一下端口号是不是36677，这是我踩过的一个坑</p></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200515210237651.png" alt="image-20200515210237651"></p><h3 id="配置Typora实现插入图片自动上传"><a href="#配置Typora实现插入图片自动上传" class="headerlink" title="配置Typora实现插入图片自动上传"></a>配置Typora实现插入图片自动上传</h3><p>新版本的Typora已经支持图片上传功能，具体配置如下（文件-&gt;偏好设置）：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/image-20200505112000580.png" alt="image-20200505112000580"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://gitee.com/alannum3/MyImages/raw/master/img/test.gif" alt="test"><br>可以看到这里图片的链接是之前在<code>gitee</code>中创建的用来保存图片的<code>Repository</code>的地址了</p><p>哈哈，成功了，这样效率就提高了许多了。</p>]]></content>
      
      
      <categories>
          
          <category> 效率工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typora </tag>
            
            <tag> 博客 </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
